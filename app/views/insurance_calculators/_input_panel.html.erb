<%# 입력 패널 파셜 — tab: "yearend"|"retire", year: 2025|2026 %>
<div class="space-y-6">

  <%# 기본 정보 카드 %>
  <div class="bg-white rounded-2xl border border-slate-200 p-6">
    <h2 class="text-base font-bold text-slate-800 mb-4">기본 정보</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">

      <%# 보수월액 %>
      <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">
          보수월액
          <span class="ml-1 text-slate-400 cursor-help group relative inline-block" title="나이스/에듀파인 급여대장 기준 (비과세 제외)">
            <span class="material-symbols-outlined text-sm align-middle">help_outline</span>
          </span>
        </label>
        <input type="text" inputmode="numeric"
          data-insurance-calculator-target="bonsuWol<%= tab.capitalize %>"
          data-action="input->insurance-calculator#formatNumber"
          placeholder="예: 1,558,470"
          class="w-full border border-slate-300 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400">
        <p class="text-xs text-slate-400 mt-1">나이스/에듀파인 급여대장 기준 (비과세 제외)</p>
      </div>

      <%# 근무월수 %>
      <div>
        <label class="block text-sm font-semibold text-slate-700 mb-1">
          근무월수
          <span class="ml-1 text-slate-400 cursor-help" title="실제 근무한 월수 (입사월 포함, 1~36)">
            <span class="material-symbols-outlined text-sm align-middle">help_outline</span>
          </span>
        </label>
        <input type="number" min="1" max="36"
          data-insurance-calculator-target="geunMonths<%= tab.capitalize %>"
          placeholder="12"
          class="w-full border border-slate-300 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400">
        <p class="text-xs text-slate-400 mt-1">실제 근무한 개월 수 (1~36)</p>
      </div>

      <%# 보수총액 %>
      <div class="sm:col-span-2">
        <label class="block text-sm font-semibold text-slate-700 mb-1">
          보수총액
          <span class="ml-1 text-slate-400 cursor-help" title="전년도 또는 퇴직 시점까지 발생한 과세소득 총액">
            <span class="material-symbols-outlined text-sm align-middle">help_outline</span>
          </span>
        </label>
        <input type="text" inputmode="numeric"
          data-insurance-calculator-target="bonsuTotal<%= tab.capitalize %>"
          data-action="input->insurance-calculator#formatNumber"
          placeholder="예: 21,033,330"
          class="w-full border border-slate-300 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400">
        <p class="text-xs text-slate-400 mt-1">전년도 또는 퇴직 시점까지의 과세소득 총액</p>
      </div>

      <%# 월중입사 %>
      <div class="sm:col-span-2">
        <label class="block text-sm font-semibold text-slate-700 mb-1">월중 입사 여부</label>
        <div class="flex gap-4">
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="wol_ip_<%= tab %>" value="Y"
              data-insurance-calculator-target="wolIp<%= tab.capitalize %>"
              data-action="change->insurance-calculator#toggleIl1Month"
              data-tab="<%= tab %>"
              class="w-4 h-4 text-indigo-600">
            <span class="text-sm font-medium text-slate-700">예 (월 중간 입사)</span>
          </label>
          <label class="flex items-center gap-2 cursor-pointer">
            <input type="radio" name="wol_ip_<%= tab %>" value="N"
              data-insurance-calculator-target="wolIp<%= tab.capitalize %>"
              data-action="change->insurance-calculator#toggleIl1Month"
              data-tab="<%= tab %>"
              checked
              class="w-4 h-4 text-indigo-600">
            <span class="text-sm font-medium text-slate-700">아니오 (1일 입사)</span>
          </label>
        </div>
        <p class="text-xs text-slate-400 mt-1">입사 첫 달 건강·연금보험료 부과 여부 판단용 (월 중간에 입사했으면 '예' 선택)</p>
      </div>

      <%# 1일 포함 근무월 (월중입사=Y일 때만) %>
      <div data-insurance-calculator-target="il1Field<%= tab.capitalize %>" class="sm:col-span-2 hidden">
        <label class="block text-sm font-semibold text-slate-700 mb-1">
          1일이 포함된 근무월수
          <span class="ml-1 text-slate-400 cursor-help" title="입사 첫 달 1일이 포함된 달의 수">
            <span class="material-symbols-outlined text-sm align-middle">help_outline</span>
          </span>
        </label>
        <input type="number" min="1"
          data-insurance-calculator-target="il1Month<%= tab.capitalize %>"
          placeholder="예: 3"
          class="w-full border border-slate-300 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400">
        <p class="text-xs text-slate-400 mt-1">전체 근무월 중 1일이 들어간 달의 수</p>
      </div>

    </div>
  </div>

  <%# 기납보험료 카드 %>
  <div class="bg-white rounded-2xl border border-slate-200 p-6">
    <h2 class="text-base font-bold text-slate-800 mb-1">기납보험료</h2>
    <p class="text-xs text-slate-400 mb-4">급여대장 공제 보험료 누계액 (또는 건강보험 EDI 산출내역 참조) — 해당 없으면 0 입력</p>

    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead>
          <tr class="border-b border-slate-200">
            <th class="text-left py-2 pr-4 text-slate-500 font-semibold w-24">보험 종류</th>
            <th class="text-center py-2 px-2 text-slate-500 font-semibold">개인 부담</th>
            <th class="text-center py-2 pl-2 text-slate-500 font-semibold">기관 부담</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          <tr>
            <td class="py-2 pr-4 text-slate-600 font-medium">국민연금</td>
            <td class="py-2 px-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamPensionP<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
            <td class="py-2 pl-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamPensionG<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
          </tr>
          <tr>
            <td class="py-2 pr-4 text-slate-600 font-medium">건강보험</td>
            <td class="py-2 px-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamHealthP<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
            <td class="py-2 pl-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamHealthG<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
          </tr>
          <tr>
            <td class="py-2 pr-4 text-slate-600 font-medium">장기요양</td>
            <td class="py-2 px-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamCareP<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
            <td class="py-2 pl-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamCareG<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
          </tr>
          <tr>
            <td class="py-2 pr-4 text-slate-600 font-medium">고용보험</td>
            <td class="py-2 px-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamEmployP<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
            <td class="py-2 pl-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamEmployG<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
          </tr>
          <tr>
            <td class="py-2 pr-4 text-slate-600 font-medium">산재보험</td>
            <td class="py-2 px-2">
              <div class="w-full border border-slate-100 rounded-lg px-3 py-2 bg-slate-50 text-center text-slate-400 text-xs">개인 없음</div>
            </td>
            <td class="py-2 pl-2">
              <input type="text" inputmode="numeric"
                data-insurance-calculator-target="ginamAccidentG<%= tab.capitalize %>"
                data-action="input->insurance-calculator#formatNumber"
                placeholder="0"
                class="w-full border border-slate-200 rounded-lg px-3 py-2 text-right focus:outline-none focus:ring-2 focus:ring-indigo-400">
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <%# 산재보험료율 (기관별 상이) %>
  <div class="bg-amber-50 rounded-2xl border border-amber-200 p-4">
    <div class="flex items-center gap-2 mb-2">
      <span class="material-symbols-outlined text-amber-600 text-base">warning</span>
      <span class="text-sm font-semibold text-amber-800">산재보험료율 (기관별 상이)</span>
    </div>
    <div class="flex items-center gap-3">
      <input type="number" step="0.001" min="0"
        data-insurance-calculator-target="accidentRate<%= tab.capitalize %>"
        value="0.786"
        class="w-32 border border-amber-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white">
      <span class="text-sm text-amber-700">% (기본값: 0.786% — 담당 공단에서 확인 후 수정)</span>
    </div>
  </div>

  <%# 계산 버튼 %>
  <div class="flex gap-3">
    <button
      data-action="click->insurance-calculator#calculate"
      data-tab="<%= tab %>"
      data-year="<%= year %>"
      class="flex-1 flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3.5 px-6 rounded-xl transition-all text-base">
      <span class="material-symbols-outlined">calculate</span>
      계산하기
    </button>
    <button
      data-action="click->insurance-calculator#resetTab"
      data-tab="<%= tab %>"
      class="px-6 py-3.5 rounded-xl border border-slate-300 text-slate-600 font-semibold hover:bg-slate-50 transition-all">
      초기화
    </button>
  </div>

  <%# 결과 영역 (기본 hidden) %>
  <div data-insurance-calculator-target="result<%= tab.capitalize %>" class="hidden">
    <%= render "insurance_calculators/result_panel", tab: tab %>
  </div>

</div>
