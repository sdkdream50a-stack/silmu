<%# Stitch ë””ìì¸ v2 â€” Indigo/Violet í”„ë¦¬ë¯¸ì—„ í…Œë§ˆ (ì»´íŒŒì¼ CSS ì‚¬ìš©) %>

<div class="font-sans text-slate-800 antialiased selection:bg-indigo-500/30 selection:text-indigo-600">

<!-- ê³µì§€ì‚¬í•­ ë°°ë„ˆ -->
<div class="bg-gradient-to-r from-indigo-600 to-violet-600 text-white">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-3">
    <div class="flex items-center justify-center gap-3 text-sm">
      <span class="material-symbols-outlined text-lg animate-pulse">campaign</span>
      <span class="font-medium">
        <span class="hidden sm:inline">ğŸ“¢ ìƒˆë¡œìš´ ì†Œì‹:</span>
        <strong class="ml-1">ë²•ë ¹ ì •í•©ì„± ìë™ ê²€ì¦ ì‹œìŠ¤í…œ</strong> ì¶”ê°€ (2026-02-13)
        <span class="hidden md:inline ml-2 opacity-90">| ê°ì‚¬ì‚¬ë¡€ <%= @audit_case_count %>ê±´ ì—…ë°ì´íŠ¸ ì™„ë£Œ</span>
      </span>
      <%= link_to updates_path, class: "ml-3 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-lg text-white font-semibold transition-colors whitespace-nowrap" do %>
        ìì„¸íˆ ë³´ê¸° â†’
      <% end %>
    </div>
  </div>
</div>

<!-- Hero Section -->
<div class="relative w-full hero-gradient overflow-hidden pb-12 pt-4 lg:pt-6">
  <div class="absolute top-0 left-1/4 h-96 w-96 rounded-full bg-indigo-500/20 blur-3xl filter"></div>
  <div class="absolute bottom-0 right-1/4 h-96 w-96 rounded-full bg-violet-500/10 blur-3xl filter"></div>
  <div class="relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col items-center text-center">
      <div class="mb-8 inline-flex items-center rounded-full border border-indigo-400/30 bg-indigo-900/30 px-4 py-1.5 backdrop-blur-md shadow-glow">
        <span class="mr-2 flex h-2 w-2 relative">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
        </span>
        <span class="text-xs font-semibold text-indigo-100 tracking-wide uppercase">Premium Government Solution</span>
      </div>
      <h1 class="mb-10 max-w-5xl text-5xl font-bold tracking-tight text-white sm:text-6xl lg:text-7xl leading-[1.1]">
        ê³„ì•½ ì‹¤ë¬´,<br class="hidden sm:block"/>
        <span class="text-gradient">ì´ì œ í˜¼ì ê³ ë¯¼í•˜ì§€ ë§ˆì„¸ìš”</span>
      </h1>
      <p class="mb-14 max-w-2xl text-xl text-slate-200 leading-relaxed font-normal">
        í—·ê°ˆë¦¬ëŠ” ì ˆì°¨, ë³µì¡í•œ ë²•ë ¹ë„<br class="hidden sm:block"/>
        <strong class="font-bold text-white">ë‹¨ê³„ë³„ë¡œ ì‰½ê²Œ</strong> ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.
      </p>

      <!-- Search -->
      <div class="w-full max-w-3xl mb-16 relative z-10">
        <form action="<%= chatbot_path %>" method="get" data-turbo="false">
          <div class="search-glass relative flex items-center rounded-2xl overflow-hidden p-2 transition-all duration-300">
            <div class="flex h-14 w-14 items-center justify-center text-indigo-300 pl-2">
              <span class="material-symbols-outlined text-3xl">search</span>
            </div>
            <input name="q" class="h-14 w-full border-0 bg-transparent px-4 text-white placeholder:text-slate-400 focus:ring-0 text-lg" placeholder="ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”? (ì˜ˆ: ìˆ˜ì˜ê³„ì•½ í•œë„, ë¬¼í’ˆêµ¬ë§¤ ì ˆì°¨)" type="text"/>
            <button type="submit" class="hidden sm:flex h-12 items-center justify-center rounded-xl bg-indigo-600 px-8 text-base font-bold text-white transition-all hover:bg-indigo-500 shadow-lg shadow-indigo-600/30">
              ê²€ìƒ‰
            </button>
          </div>
        </form>
        <div class="mt-8 flex flex-wrap justify-center gap-3">
          <% [
            [topic_path("private-contract"), "gavel", "ìˆ˜ì˜ê³„ì•½", "indigo"],
            [topic_path("bidding"), "shopping_bag", "ì…ì°°", "emerald"],
            [topic_path("contract-execution"), "engineering", "ê³„ì•½ì²´ê²°", "amber"],
            [topic_path("inspection"), "design_services", "ê²€ìˆ˜Â·ê²€ì‚¬", "pink"]
          ].each do |path, icon, keyword, color| %>
            <%= link_to path, class: "group inline-flex min-h-[44px] items-center gap-2 rounded-full bg-slate-800/50 px-4 py-2 text-sm font-medium text-slate-300 hover:bg-indigo-600/20 hover:text-white hover:border-indigo-500/50 transition-all backdrop-blur-sm border border-slate-700/50" do %>
              <span class="material-symbols-outlined text-[16px] text-<%= color %>-400 group-hover:text-<%= color %>-300"><%= icon %></span> <%= keyword %>
            <% end %>
          <% end %>
        </div>
      </div>

      <!-- Stats -->
      <div class="grid w-full max-w-5xl grid-cols-2 gap-5 sm:grid-cols-4">
        <div class="group flex flex-col rounded-3xl bg-white/10 p-7 text-center backdrop-blur-md border-2 border-white/10 hover:bg-white/15 hover:border-white/25 transition-all duration-300 cursor-default shadow-lg hover:shadow-2xl">
          <span class="text-5xl font-bold text-white mb-2 group-hover:scale-110 transition-transform duration-300"><%= tool_count %></span>
          <span class="text-sm font-bold text-indigo-100 uppercase tracking-wider">ì—…ë¬´ ìë™í™” ë„êµ¬</span>
        </div>
        <div class="group flex flex-col rounded-3xl bg-white/10 p-7 text-center backdrop-blur-md border-2 border-white/10 hover:bg-white/15 hover:border-white/25 transition-all duration-300 cursor-default shadow-lg hover:shadow-2xl">
          <span class="text-5xl font-bold text-white mb-2 group-hover:scale-110 transition-transform duration-300"><%= @topic_count + @guide_count %></span>
          <span class="text-sm font-bold text-indigo-100 uppercase tracking-wider">ë²•ë ¹Â·ì—…ë¬´ ê°€ì´ë“œ</span>
        </div>
        <div class="group flex flex-col rounded-3xl bg-white/10 p-7 text-center backdrop-blur-md border-2 border-white/10 hover:bg-white/15 hover:border-white/25 transition-all duration-300 cursor-default shadow-lg hover:shadow-2xl">
          <span class="text-5xl font-bold text-white mb-2 group-hover:scale-110 transition-transform duration-300"><%= @audit_case_count %></span>
          <span class="text-sm font-bold text-indigo-100 uppercase tracking-wider">ê°ì‚¬ì‚¬ë¡€</span>
        </div>
        <div class="group flex flex-col rounded-3xl bg-white/10 p-7 text-center backdrop-blur-md border-2 border-white/10 hover:bg-white/15 hover:border-white/25 transition-all duration-300 cursor-default shadow-lg hover:shadow-2xl">
          <span class="text-5xl font-bold text-white mb-2 group-hover:scale-110 transition-transform duration-300"><%= @template_count %></span>
          <span class="text-sm font-bold text-indigo-100 uppercase tracking-wider">ì‹¤ë¬´ ì„œì‹ í…œí”Œë¦¿</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Core Tools Section -->
<section class="bg-background-light py-16 relative">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mb-14 flex items-end justify-between">
      <div>
        <h2 class="text-4xl font-bold text-slate-900 sm:text-5xl tracking-tight mb-4">í•µì‹¬ ì‹¤ë¬´ ë„êµ¬</h2>
        <p class="text-xl text-slate-600 font-medium">ë³µì¡í•œ ì—…ë¬´ë¥¼ <strong class="text-indigo-700 font-bold">í´ë¦­ ëª‡ ë²ˆ</strong>ìœ¼ë¡œ í•´ê²°í•˜ëŠ” í”„ë¦¬ë¯¸ì—„ íˆ´í‚·</p>
      </div>
      <%= link_to tools_path, class: "hidden group items-center gap-2 px-5 py-3 text-base font-bold text-white bg-indigo-600 hover:bg-indigo-700 rounded-xl shadow-lg hover:shadow-xl transition-all sm:flex" do %>
        ì „ì²´ ë„êµ¬ ë³´ê¸°
        <span class="material-symbols-outlined text-xl group-hover:translate-x-1 transition-transform">arrow_forward</span>
      <% end %>
    </div>

    <!-- Main 3 Tools -->
    <div class="grid grid-cols-1 gap-10 lg:grid-cols-3 mb-16">
      <%= link_to contract_method_path, class: "group relative overflow-hidden rounded-3xl bg-white p-10 shadow-xl hover:shadow-2xl hover:-translate-y-3 transition-all duration-500 border-2 border-slate-100 hover:border-indigo-200" do %>
        <div class="absolute inset-0 bg-gradient-to-br from-indigo-50/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="relative z-10 mb-7 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-indigo-50 text-indigo-600 shadow-md group-hover:bg-indigo-600 group-hover:text-white transition-colors duration-300">
          <span class="material-symbols-outlined text-4xl">account_tree</span>
        </div>
        <h3 class="relative z-10 text-2xl font-bold text-slate-900 mb-4 tracking-tight">ê³„ì•½ë°©ì‹ ê²°ì •</h3>
        <p class="relative z-10 text-base text-slate-600 leading-relaxed mb-10">ì˜ˆì‚°ê³¼ í’ˆëª©ë§Œ ì…ë ¥í•˜ë©´ ë²•ë ¹ì— ë§ëŠ” ìµœì ì˜ ê³„ì•½ ë°©ì‹ì„ <strong class="text-indigo-700 font-bold">ì¸ê³µì§€ëŠ¥ì´ ì¶”ì²œ</strong>í•´ ë“œë¦½ë‹ˆë‹¤.</p>
        <div class="relative z-10 flex items-center text-indigo-600 font-bold text-base group-hover:translate-x-2 transition-transform duration-300">
          <span>ì§€ê¸ˆ í™•ì¸í•˜ê¸°</span>
          <span class="material-symbols-outlined ml-2 text-xl">arrow_forward</span>
        </div>
      <% end %>

      <%= link_to contract_guarantee_path, class: "group relative overflow-hidden rounded-3xl bg-white p-10 shadow-xl hover:shadow-2xl hover:-translate-y-3 transition-all duration-500 border-2 border-slate-100 hover:border-amber-200" do %>
        <div class="absolute inset-0 bg-gradient-to-br from-amber-50/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="relative z-10 mb-7 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-amber-50 text-amber-600 shadow-md group-hover:bg-amber-600 group-hover:text-white transition-colors duration-300">
          <span class="material-symbols-outlined text-4xl">percent</span>
        </div>
        <h3 class="relative z-10 text-2xl font-bold text-slate-900 mb-4 tracking-tight">ê³„ì•½ë³´ì¦ê¸ˆ ê³„ì‚°</h3>
        <p class="relative z-10 text-base text-slate-600 leading-relaxed mb-10">ê³„ì•½ê¸ˆì•¡ë§Œ ì…ë ¥í•˜ë©´ <strong class="text-amber-700 font-bold">ê³„ì•½Â·ì´í–‰Â·í•˜ìÂ·ì„ ê¸ˆ ë³´ì¦ê¸ˆ</strong>ì„ ë²•ë ¹ ê¸°ì¤€ì— ë§ê²Œ ìë™ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
        <div class="relative z-10 flex items-center text-amber-600 font-bold text-base group-hover:translate-x-2 transition-transform duration-300">
          <span>ì§€ê¸ˆ í™•ì¸í•˜ê¸°</span>
          <span class="material-symbols-outlined ml-2 text-xl">arrow_forward</span>
        </div>
      <% end %>

      <%= link_to estimated_price_path, class: "group relative overflow-hidden rounded-3xl bg-white p-10 shadow-xl hover:shadow-2xl hover:-translate-y-3 transition-all duration-500 border-2 border-slate-100 hover:border-emerald-200" do %>
        <div class="absolute inset-0 bg-gradient-to-br from-emerald-50/80 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="relative z-10 mb-7 inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-emerald-50 text-emerald-600 shadow-md group-hover:bg-emerald-600 group-hover:text-white transition-colors duration-300">
          <span class="material-symbols-outlined text-4xl">payments</span>
        </div>
        <h3 class="relative z-10 text-2xl font-bold text-slate-900 mb-4 tracking-tight">ì˜ˆì •ê°€ê²© ì‚°ì •</h3>
        <p class="relative z-10 text-base text-slate-600 leading-relaxed mb-10">ì‹œì¥ì¡°ì‚¬ ê°€ê²©ì„ ì…ë ¥í•˜ë©´ <strong class="text-emerald-700 font-bold">ë³µìˆ˜ì˜ˆë¹„ê°€ê²© 85~100%</strong> ë²”ìœ„ì˜ ì ì • ì˜ˆì •ê°€ê²©ì„ ì¦‰ì‹œ ì‚°ì¶œí•©ë‹ˆë‹¤.</p>
        <div class="relative z-10 flex items-center text-emerald-600 font-bold text-base group-hover:translate-x-2 transition-transform duration-300">
          <span>ì§€ê¸ˆ í™•ì¸í•˜ê¸°</span>
          <span class="material-symbols-outlined ml-2 text-xl">arrow_forward</span>
        </div>
      <% end %>
    </div>

    <!-- Minor Tools -->
    <div class="grid grid-cols-2 gap-6 md:grid-cols-3">
      <% [
        [legal_period_path, "calendar_month", "ê³„ì•½ê¸°ê°„ ì‚°ì •"],
        [pre_contract_checklist_path, "checklist_rtl", "ì‚¬ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸"],
        [contract_flow_path, "account_tree", "ê³„ì•½ íë¦„ë„"]
      ].each do |path, icon, label| %>
        <%= link_to path, class: "flex flex-col items-center justify-center gap-3 rounded-2xl bg-white p-6 shadow-sm border border-slate-100 hover:border-indigo-100 hover:shadow-md hover:-translate-y-1 transition-all duration-300" do %>
          <div class="flex h-10 w-10 items-center justify-center rounded-full bg-slate-50 text-slate-600">
            <span class="material-symbols-outlined text-[20px]"><%= icon %></span>
          </div>
          <span class="text-sm font-semibold text-slate-900"><%= label %></span>
        <% end %>
      <% end %>
    </div>
  </div>
</section>

<!-- Quick Price Finder -->
<div class="bg-white py-20 border-y border-slate-100">
  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="relative rounded-3xl overflow-hidden bg-slate-900 shadow-2xl">
      <div class="absolute top-0 right-0 -mt-20 -mr-20 h-64 w-64 rounded-full bg-indigo-500 opacity-20 blur-3xl"></div>
      <div class="absolute bottom-0 left-0 -mb-20 -ml-20 h-64 w-64 rounded-full bg-emerald-500 opacity-20 blur-3xl"></div>
      <div class="relative z-10 p-8 md:p-12 flex flex-col lg:flex-row items-center justify-between gap-10">
        <div class="flex-1 text-center lg:text-left">
          <div class="inline-flex items-center gap-2 mb-4 px-3 py-1 rounded-full bg-white/10 border border-white/10 backdrop-blur-sm">
            <span class="material-symbols-outlined text-emerald-400 text-sm">payments</span>
            <span class="text-xs font-bold uppercase tracking-wider text-emerald-400">Smart Price Guide</span>
          </div>
          <h3 class="text-3xl font-bold text-white mb-3">ê¸ˆì•¡ì„ ì…ë ¥í•´ë³´ì„¸ìš”</h3>
          <p class="text-slate-300 text-lg">ê¸ˆì•¡ì— ë”°ë¼ ë²•ë ¹ìƒ ê°€ëŠ¥í•œ ëª¨ë“  ê³„ì•½ ë°©ë²•(1ì¸ ê²¬ì , 2ì¸ ì´ìƒ ê²¬ì , ì…ì°° ë“±)ì„<br class="hidden lg:block"/> ì¦‰ì‹œ ë¶„ì„í•˜ì—¬ ê°€ì´ë“œí•´ë“œë¦½ë‹ˆë‹¤.</p>
        </div>
        <div class="w-full lg:w-auto flex-1 max-w-lg">
          <div class="flex gap-3 mb-3">
            <select id="price-category" class="flex-shrink-0 w-24 rounded-xl border-0 bg-white backdrop-blur-md text-slate-900 px-3 py-4 text-sm font-bold focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 shadow-lg">
              <option value="goods" class="text-slate-900 font-bold">ë¬¼í’ˆ</option>
              <option value="service" class="text-slate-900 font-bold">ìš©ì—­</option>
              <option value="construction" class="text-slate-900 font-bold">ê³µì‚¬</option>
            </select>
            <div class="flex-1 bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl p-2 flex items-center shadow-lg">
              <input id="price-input" class="w-full bg-transparent border-0 px-4 py-2 text-2xl font-bold text-white drop-shadow-lg placeholder:text-slate-500 focus:ring-0" placeholder="ì˜ˆ: 20,000,000" type="text"/>
              <span class="text-slate-400 text-lg font-medium mr-4">ì›</span>
              <button type="button" onclick="document.getElementById('price-input').dispatchEvent(new Event('input'))" class="shrink-0 rounded-xl bg-indigo-600 px-8 py-4 text-base font-bold text-white shadow-lg shadow-indigo-600/30 hover:bg-indigo-500 transition-all">
                ì¡°íšŒí•˜ê¸°
              </button>
            </div>
          </div>
          <div class="flex flex-wrap gap-2 mb-4 justify-center lg:justify-start">
            <% [["1ì‹­ë§Œì›", 100_000], ["1ë°±ë§Œì›", 1_000_000], ["1ì²œë§Œì›", 10_000_000], ["5ì²œë§Œì›", 50_000_000], ["1ì–µì›", 100_000_000]].each do |label, val| %>
              <button type="button" class="price-quick-btn px-3 py-1.5 text-xs font-medium bg-white/5 text-slate-400 rounded-lg border border-white/10 hover:bg-indigo-600/20 hover:text-white hover:border-indigo-500/50 transition-all" data-value="<%= val %>"><%= label %></button>
            <% end %>
          </div>
          <p class="text-center lg:text-right text-xs text-slate-500">* ë¶€ê°€ì„¸ í¬í•¨ ê¸ˆì•¡ ê¸°ì¤€</p>
          <div id="price-result" class="hidden mt-4">
            <div id="price-result-content" class="p-4 rounded-xl border-2"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Topic Guides & Templates -->
<section class="py-24 bg-background-light">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16">
      <!-- Topic Guides -->
      <div class="lg:col-span-7">
        <h2 class="mb-8 text-2xl font-bold text-slate-900 flex items-center gap-2">
          <span class="material-symbols-outlined text-indigo-600">library_books</span> ì£¼ìš” ë²•ë ¹ ê°€ì´ë“œ
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
          <%# Featured: ìˆ˜ì˜ê³„ì•½ (ê°€ë¡œ ì „í­, ê°•ì¡° ìŠ¤íƒ€ì¼) %>
          <%= link_to topic_path("private-contract"), class: "group relative sm:col-span-2 flex items-start gap-5 rounded-2xl bg-gradient-to-br from-indigo-50 via-white to-violet-50 p-6 shadow-sm border-2 border-indigo-200 transition-all hover:shadow-lg hover:-translate-y-1 hover:border-indigo-400 cursor-pointer overflow-hidden" do %>
            <div class="absolute top-3 right-3">
              <span class="inline-flex items-center gap-1 px-2.5 py-1 text-xs font-bold bg-indigo-600 text-white rounded-full">
                <span class="material-symbols-outlined text-sm">star</span> í•„ìˆ˜ ê°€ì´ë“œ
              </span>
            </div>
            <div class="shrink-0 flex h-14 w-14 items-center justify-center rounded-xl bg-indigo-100 text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors">
              <span class="material-symbols-outlined text-3xl">handshake</span>
            </div>
            <div class="pr-24 sm:pr-28">
              <h3 class="font-bold text-xl text-slate-900 group-hover:text-indigo-600 transition-colors">ìˆ˜ì˜ê³„ì•½</h3>
              <p class="mt-1.5 text-sm text-slate-600 leading-relaxed">1ì¸ ê²¬ì  ê°€ëŠ¥ ê¸ˆì•¡ ë° ìš”ê±´, ì˜ˆì™¸ ì‚¬í•­ ì™„ë²½ ì •ë¦¬</p>
              <div class="mt-3 flex flex-wrap gap-2">
                <span class="inline-flex items-center gap-1 text-xs text-indigo-600 bg-indigo-50 border border-indigo-100 rounded-md px-2 py-0.5 font-medium">ìˆ˜ì˜ê³„ì•½ í•œë„</span>
                <span class="inline-flex items-center gap-1 text-xs text-indigo-600 bg-indigo-50 border border-indigo-100 rounded-md px-2 py-0.5 font-medium">1ì¸ ê²¬ì </span>
                <span class="inline-flex items-center gap-1 text-xs text-indigo-600 bg-indigo-50 border border-indigo-100 rounded-md px-2 py-0.5 font-medium">ìˆ˜ì˜ê³„ì•½ ì‚¬ìœ </span>
              </div>
            </div>
          <% end %>

          <%# ë‚˜ë¨¸ì§€ 5ê°œ ì¹´ë“œ (ê¸°ì¡´ ìŠ¤íƒ€ì¼) %>
          <% [
            [topic_path("bidding"), "gavel", "ê²½ìŸì…ì°°", "ê³µê³ ê¸°ê°„, ì ê²©ì‹¬ì‚¬, ë‚™ì°°ì ê²°ì • ì ˆì°¨ ì™„ë²½ ê°€ì´ë“œ", "violet"],
            [topic_path("contract-execution"), "description", "ê³„ì•½ì²´ê²°", "ê³„ì•½ì„œ ì‘ì„±ë¶€í„° ë³´ì¦ê¸ˆ ì§•ìˆ˜ê¹Œì§€ ë‹¨ê³„ë³„ ì‹¤ë¬´", "amber"],
            [topic_path("inspection"), "fact_check", "ê²€ìˆ˜Â·ê²€ì‚¬", "ë¬¼í’ˆÂ·ìš©ì—­Â·ê³µì‚¬ ê²€ìˆ˜ì¡°ì„œ ì‘ì„± ë° í•˜ìê²€ì‚¬ ì ˆì°¨", "emerald"],
            [topic_path("payment"), "payments", "ëŒ€ê¸ˆì§€ê¸‰", "ì„ ê¸ˆÂ·ê¸°ì„±ê¸ˆÂ·ì”ê¸ˆ ì§€ê¸‰ ìš”ê±´ ë° ì§€ì—° ì‹œ ì¡°ì¹˜ì‚¬í•­", "blue"],
            [topic_path("travel-expense"), "flight_takeoff", "ì¶œì¥ë¹„", "êµ­ë‚´Â·ì™¸ ì¶œì¥ ì—¬ë¹„ ì§€ê¸‰ ê¸°ì¤€ê³¼ ì²­êµ¬ ì ˆì°¨ (2025)", "rose"]
          ].each do |path, icon, title, desc, color| %>
            <%= link_to path, class: "group flex items-start gap-4 rounded-2xl bg-white p-6 shadow-sm border border-slate-100 transition-all hover:shadow-lg hover:-translate-y-1 hover:border-indigo-100 cursor-pointer" do %>
              <div class="shrink-0 flex h-12 w-12 items-center justify-center rounded-xl bg-<%= color %>-50 text-<%= color %>-600 group-hover:bg-<%= color %>-600 group-hover:text-white transition-colors">
                <span class="material-symbols-outlined"><%= icon %></span>
              </div>
              <div>
                <h3 class="font-bold text-lg text-slate-900 group-hover:text-<%= color %>-600 transition-colors"><%= title %></h3>
                <p class="mt-1 text-sm text-slate-500 leading-snug"><%= desc %></p>
              </div>
            <% end %>
          <% end %>
        </div>
        <div class="mt-6">
          <%= link_to topics_path, class: "inline-flex items-center gap-1 text-sm font-bold text-indigo-600 hover:text-indigo-700 transition-colors" do %>
            ì „ì²´ ë²•ë ¹ê°€ì´ë“œ ë³´ê¸° <span class="material-symbols-outlined text-lg">arrow_forward</span>
          <% end %>
        </div>
      </div>

      <!-- Templates -->
      <div class="lg:col-span-5">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
            <span class="material-symbols-outlined text-indigo-600">folder_open</span> ì¸ê¸° ì„œì‹
          </h2>
          <%= link_to templates_path, class: "text-sm font-semibold text-slate-500 hover:text-indigo-600 transition-colors" do %>
            ë”ë³´ê¸° â†’
          <% end %>
        </div>
        <div class="space-y-4">
          <% [
            { title: "ë¬¼í’ˆ í‘œì¤€ êµ¬ë§¤ê³„ì•½ì„œ", format: "HWP", color: "indigo" },
            { title: "ìˆ˜ì˜ê³„ì•½ ë°°ì œì‚¬ìœ  ê°ì„œ", format: "HWP", color: "indigo" },
            { title: "ì°©ìˆ˜ê³„ ë° ì™„ë£Œê³„ ì„¸íŠ¸", format: "XLSX", color: "emerald" }
          ].each do |tmpl| %>
            <%= link_to templates_path, class: "flex items-center p-4 rounded-2xl bg-white border border-slate-100 shadow-sm hover:shadow-md hover:border-indigo-100 transition-all group" do %>
              <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-<%= tmpl[:color] %>-50 text-<%= tmpl[:color] %>-600 font-bold text-xs"><%= tmpl[:format] %></div>
              <div class="ml-4 flex-1">
                <h4 class="font-bold text-lg text-slate-900 group-hover:text-<%= tmpl[:color] %>-600 transition-colors"><%= tmpl[:title] %></h4>
                <span class="text-xs text-slate-500">ìµœì‹  ê°œì •íŒ</span>
              </div>
              <span class="material-symbols-outlined text-slate-300 group-hover:text-<%= tmpl[:color] %>-600 transition-colors">download</span>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Daily Quiz Section -->
<section class="relative overflow-hidden py-24 bg-[#0B1120]">
  <div class="absolute inset-0 bg-gradient-to-r from-slate-900 to-indigo-950/40"></div>
  <div class="absolute right-0 top-0 h-[500px] w-[500px] bg-indigo-600/10 blur-[100px] rounded-full pointer-events-none"></div>
  <div class="relative mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col md:flex-row items-center justify-between gap-16">
      <div class="max-w-xl text-white">
        <div class="mb-6 inline-flex items-center rounded-full bg-indigo-500/20 px-4 py-1.5 text-sm font-semibold text-indigo-300 ring-1 ring-inset ring-indigo-500/30">
          <span class="mr-2 h-1.5 w-1.5 rounded-full bg-indigo-400 animate-pulse"></span>
          ì˜¤ëŠ˜ì˜ ì‹¤ë¬´ í€´ì¦ˆ
        </div>
        <h2 class="text-4xl font-bold tracking-tight sm:text-5xl leading-tight">ë§¤ì¼ í•˜ë‚˜ì”©,<br/><span class="text-indigo-400">ê³„ì•½ ì „ë¬¸ê°€</span>ë¡œ ì„±ì¥í•˜ì„¸ìš”.</h2>
        <p class="mt-6 text-xl text-slate-400 font-light leading-relaxed">í•˜ë£¨ 1ë¶„ íˆ¬ìë¡œ í—·ê°ˆë¦¬ëŠ” ë²•ë ¹ê³¼ ì§€ì¹¨ì„ ë§ˆìŠ¤í„°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/>í‹€ë ¤ë„ ê´œì°®ì•„ìš”, ëª…ì¾Œí•œ í•´ì„¤ì´ ìˆìœ¼ë‹ˆê¹Œìš”.</p>
      </div>
      <div class="w-full max-w-md">
        <div class="glass-dark rounded-3xl p-8 shadow-2xl relative border-t border-white/10">
          <div class="absolute -top-3 -right-3 h-20 w-20 bg-emerald-500/20 blur-2xl rounded-full"></div>
          <div class="mb-8 flex items-center justify-between">
            <span id="quiz-progress" class="text-xs font-bold tracking-widest text-slate-400 uppercase">ë¬¸ì œ 1/5</span>
            <span id="quiz-category" class="inline-flex items-center rounded-md bg-emerald-400/10 px-2 py-1 text-xs font-bold text-emerald-400 ring-1 ring-inset ring-emerald-400/20">ì˜ˆì‚°íšŒê³„</span>
          </div>
          <h3 id="quiz-question" class="mb-10 text-xl font-bold text-white leading-relaxed"></h3>
          <div class="space-y-3" id="quiz-options"></div>
          <div id="quiz-result" class="hidden mt-4 p-4 rounded-xl">
            <p class="font-semibold text-lg" id="result-message"></p>
            <p class="text-sm mt-2 text-gray-300" id="result-explanation"></p>
          </div>
          <div id="quiz-final" class="hidden text-center py-6">
            <div class="text-5xl mb-3">&#127881;</div>
            <h3 class="text-xl font-bold text-white mb-2">í€´ì¦ˆ ì™„ë£Œ!</h3>
            <p class="text-gray-300 mb-2">ì´ 5ë¬¸ì œ ì¤‘ <span id="final-score" class="text-emerald-400 font-bold">0</span>ë¬¸ì œ ì •ë‹µ</p>
            <button id="quiz-restart" class="mt-3 px-6 py-2.5 rounded-lg bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition-colors">ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>
          </div>
          <div id="quiz-footer" class="mt-6 flex justify-end">
            <button id="quiz-submit" class="px-6 py-2.5 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-500 shadow-lg shadow-indigo-600/30 transition-all disabled:opacity-40 disabled:cursor-not-allowed" disabled>ì •ë‹µ í™•ì¸</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- External Links / Partner Networks -->
<section class="bg-slate-50 py-20 border-t border-slate-200">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <h2 class="mb-10 text-center text-lg font-bold text-slate-400 uppercase tracking-widest">Partner Networks</h2>
    <div class="grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-6">
      <% [
        ["https://www.g2b.go.kr", "G2B", "ë‚˜ë¼ì¥í„°", "text-blue-900"],
        ["https://www.s2b.kr", "S2B", "í•™êµì¥í„°", "text-orange-500"],
        ["https://www.onbid.co.kr", "On-Bid", "ì˜¨ë¹„ë“œ", "text-green-600"],
        ["https://www.lofin365.go.kr", "e-Hozo", "ì§€ë°©ì¬ì •", "text-slate-800"],
        ["https://eduinfo.go.kr", "EDUI", "ì§€ë°©êµìœ¡ì¬ì •", "text-indigo-600"],
        ["https://www.law.go.kr", "Law", "êµ­ê°€ë²•ë ¹ì„¼í„°", "text-violet-600"]
      ].each do |url, abbr, name, color_class| %>
        <a href="<%= url %>" target="_blank" rel="noopener" class="group flex flex-col items-center justify-center rounded-2xl bg-white p-6 shadow-sm border border-slate-100 transition-all hover:-translate-y-1 hover:shadow-md hover:border-indigo-100">
          <span class="mb-2 text-xl font-black <%= color_class %> group-hover:scale-105 transition-transform"><%= abbr %></span>
          <span class="text-xs font-medium text-slate-500"><%= name %></span>
        </a>
      <% end %>
    </div>
  </div>
</section>

<!-- Final CTA -->
<section class="bg-white py-24">
  <div class="mx-auto max-w-4xl px-4 text-center sm:px-6 lg:px-8">
    <h2 class="text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl">
      ì‹¤ë¬´, ì´ì œ ë” ì‰½ê³  ì™„ë²½í•˜ê²Œ.
    </h2>
    <p class="mx-auto mt-6 max-w-2xl text-xl text-slate-500 font-light">
      ê³µë¬´ì›ì´ ì„ íƒí•œ í”„ë¦¬ë¯¸ì—„ ì‹¤ë¬´ í”Œë«í¼, ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”.
    </p>
    <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4">
      <%= link_to new_user_registration_path, class: "rounded-xl bg-slate-900 px-8 py-4 text-base font-bold text-white shadow-xl shadow-slate-900/10 hover:bg-slate-800 hover:scale-105 transition-all" do %>
        ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ê¸°
      <% end %>
      <%= link_to tools_path, class: "rounded-xl bg-slate-100 px-8 py-4 text-base font-bold text-slate-700 hover:bg-slate-200 transition-all" do %>
        ì‹¤ë¬´ ë„êµ¬ ë‘˜ëŸ¬ë³´ê¸°
      <% end %>
    </div>
  </div>
</section>

</div>

<!-- ê¸ˆì•¡ ê³„ì‚°ê¸° -->
<script>
document.addEventListener('turbo:load', function() {
  const priceInput = document.getElementById('price-input');
  const priceCategory = document.getElementById('price-category');
  const priceResult = document.getElementById('price-result');
  const priceResultContent = document.getElementById('price-result-content');
  if (!priceInput) return;

  priceInput.addEventListener('input', function() {
    let val = this.value.replace(/[^0-9]/g, '');
    if (val) { this.value = Number(val).toLocaleString(); calculateMethod(); }
    else { this.value = ''; priceResult.classList.add('hidden'); }
  });

  document.querySelectorAll('.price-quick-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      // ê¸°ì¡´ ê°’ ê°€ì ¸ì˜¤ê¸° (ì½¤ë§ˆ ì œê±° í›„ ìˆ«ì ë³€í™˜)
      const currentValue = parseInt(priceInput.value.replace(/,/g, '')) || 0;
      // ë²„íŠ¼ ê°’ê³¼ í•©ì‚°
      const newValue = currentValue + Number(this.dataset.value);
      priceInput.value = newValue.toLocaleString();
      calculateMethod();
    });
  });

  function calculateMethod() {
    const amount = parseInt(priceInput.value.replace(/,/g, ''));
    const category = priceCategory.value;
    if (!amount || amount <= 0) { priceResult.classList.add('hidden'); return; }
    let method, color, icon, desc, checklist;
    if (category === 'construction') {
      if (amount <= 20000000) { method='1ì¸ ê²¬ì  ìˆ˜ì˜ê³„ì•½'; color='emerald'; icon='person'; desc='ì¶”ì •ê°€ê²© 2ì²œë§Œì› ì´í•˜ ê³µì‚¬'; checklist=['ê²¬ì ì„œ 1ë¶€ ì§•êµ¬','ê³„ì•½ì„œ ì‘ì„± (ê°„ì´ê³„ì•½ì„œ ê°€ëŠ¥)','ì°©ê³µì‹ ê³ ì„œ','ì¤€ê³µê²€ì‚¬ ë° ëŒ€ê°€ ì§€ê¸‰']; }
      else if (amount <= 200000000) { method='2ì¸ ì´ìƒ ê²¬ì  ìˆ˜ì˜ê³„ì•½'; color='indigo'; icon='group'; desc='ì¶”ì •ê°€ê²© 2ì²œë§Œì› ì´ˆê³¼ ~ 2ì–µì› ì´í•˜ ê³µì‚¬'; checklist=['ì¶”ì •ê°€ê²© ì‚°ì •','2ì¸ ì´ìƒ ê²¬ì ì„œ ì§•êµ¬','ì˜ˆì •ê°€ê²© ì‘ì„±','ê³„ì•½ì„œ ì‘ì„±','ì°©ê³µì‹ ê³ ì„œ â†’ ì¤€ê³µê²€ì‚¬ â†’ ëŒ€ê°€ ì§€ê¸‰']; }
      else { method='ê²½ìŸì…ì°°'; color='slate'; icon='groups'; desc='ì¶”ì •ê°€ê²© 2ì–µì› ì´ˆê³¼ ê³µì‚¬'; checklist=['ì¶”ì •ê°€ê²© ì‚°ì •','ì…ì°°ê³µê³  (7ì¼ ì´ìƒ)','ì˜ˆì •ê°€ê²© ì‘ì„± (ë³µìˆ˜ì˜ˆë¹„ê°€ê²©)','ì ê²©ì‹¬ì‚¬','ê³„ì•½ ì²´ê²° â†’ ì°©ê³µ â†’ ì¤€ê³µê²€ì‚¬']; }
    } else {
      if (amount <= 20000000) { method='1ì¸ ê²¬ì  ìˆ˜ì˜ê³„ì•½'; color='emerald'; icon='person'; desc=`ì¶”ì •ê°€ê²© 2ì²œë§Œì› ì´í•˜ ${category==='goods'?'ë¬¼í’ˆ':'ìš©ì—­'}`; checklist=['ê²¬ì ì„œ 1ë¶€ ì§•êµ¬','ê³„ì•½ì„œ ì‘ì„± (ê°„ì´ê³„ì•½ì„œ ê°€ëŠ¥)','ê²€ìˆ˜ ë° ëŒ€ê°€ ì§€ê¸‰']; }
      else if (amount <= 100000000) { method='2ì¸ ì´ìƒ ê²¬ì  ìˆ˜ì˜ê³„ì•½'; color='indigo'; icon='group'; desc=`ì¶”ì •ê°€ê²© 2ì²œë§Œì› ì´ˆê³¼ ~ 1ì–µì› ì´í•˜ ${category==='goods'?'ë¬¼í’ˆ':'ìš©ì—­'}`; checklist=['ì¶”ì •ê°€ê²© ì‚°ì •','2ì¸ ì´ìƒ ê²¬ì ì„œ ì§•êµ¬','ì˜ˆì •ê°€ê²© ì‘ì„±','ê³„ì•½ì„œ ì‘ì„±','ê²€ìˆ˜ ë° ëŒ€ê°€ ì§€ê¸‰']; }
      else { method='ê²½ìŸì…ì°°'; color='slate'; icon='groups'; desc=`ì¶”ì •ê°€ê²© 1ì–µì› ì´ˆê³¼ ${category==='goods'?'ë¬¼í’ˆ':'ìš©ì—­'}`; checklist=['ì¶”ì •ê°€ê²© ì‚°ì •','ì…ì°°ê³µê³  (7ì¼ ì´ìƒ)','ì˜ˆì •ê°€ê²© ì‘ì„± (ë³µìˆ˜ì˜ˆë¹„ê°€ê²©)','ì ê²©ì‹¬ì‚¬ ë˜ëŠ” ìµœì €ê°€ë‚™ì°°','ê³„ì•½ ì²´ê²° â†’ ê²€ìˆ˜ â†’ ëŒ€ê°€ ì§€ê¸‰']; }
    }
    priceResult.classList.remove('hidden');
    priceResultContent.className = `p-4 rounded-xl border border-white/10 bg-white/5 backdrop-blur-sm`;
    priceResultContent.innerHTML = `
      <div class="flex items-center gap-3 mb-3">
        <span class="material-symbols-outlined text-2xl text-${color}-400">${icon}</span>
        <h3 class="text-lg font-bold text-white">${method}</h3>
      </div>
      <p class="text-slate-400 text-sm mb-3">${desc} (ì¶”ì •ê°€ê²©: ${Number(amount).toLocaleString()}ì›)</p>
      <div class="space-y-2">
        ${checklist.map(item => `<div class="flex items-start gap-2"><span class="material-symbols-outlined text-${color}-400 text-lg mt-0.5">check_circle</span><span class="text-slate-300 text-sm">${item}</span></div>`).join('')}
      </div>
      <div class="mt-4 pt-3 border-t border-white/10">
        <a href="${'<%= contract_method_path %>'}" class="inline-flex items-center gap-1 text-indigo-400 hover:text-indigo-300 text-sm font-semibold">ìƒì„¸ ë¶„ì„ ë°”ë¡œê°€ê¸° <span class="material-symbols-outlined text-lg">arrow_forward</span></a>
      </div>`;
  }
  priceCategory.addEventListener('change', function() { if (priceInput.value) calculateMethod(); });
});
</script>

<!-- í€´ì¦ˆ -->
<script>
document.addEventListener('turbo:load', function() {
  const allQuizData = [
    { category: "ì˜ˆì‚°íšŒê³„", question: "ë‹¤ìŒ ì¤‘ ì˜ˆì‚°ì˜ ì´ì›”ì— í•´ë‹¹í•˜ì§€ ì•ŠëŠ” ê²ƒì€?", options: ["ëª…ì‹œì´ì›”", "ì‚¬ê³ ì´ì›”", "ê³„ì†ë¹„ì´ì›”", "ì˜ˆë¹„ë¹„ì´ì›”"], answer: 3, explanation: "ì˜ˆë¹„ë¹„ì´ì›”ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°œë…ì…ë‹ˆë‹¤." },
    { category: "ì˜ˆì‚°íšŒê³„", question: "ë‹¤ìŒ ì¤‘ ì„¸ì¶œì˜ˆì‚°ì˜ ì´ìš©ì— í•´ë‹¹í•˜ëŠ” ê²ƒì€?", options: ["ì¥ ê°„ì˜ ìƒí˜¸ìœµí†µ", "ê´€ ê°„ì˜ ìƒí˜¸ìœµí†µ", "í•­ ê°„ì˜ ìƒí˜¸ìœµí†µ", "ì„¸í•­ ê°„ì˜ ìƒí˜¸ìœµí†µ"], answer: 2, explanation: "ì´ìš©ì€ ì…ë²•ê³¼ëª©ì¸ 'í•­' ê°„ì˜ ìƒí˜¸ìœµí†µì„ ë§í•©ë‹ˆë‹¤." },
    { category: "ì˜ˆì‚°íšŒê³„", question: "ì˜ˆë¹„ë¹„ ì‚¬ìš© í›„ êµ­íšŒ ìŠ¹ì¸ì„ ë°›ì•„ì•¼ í•˜ëŠ” ê¸°í•œì€?", options: ["ë‹¤ìŒ ì—°ë„ ì •ê¸°íšŒ ê°œíšŒ ì „", "ë‹¤ìŒ ì—°ë„ ì •ê¸°íšŒ ì¤‘", "ì‚¬ìš© í›„ 3ê°œì›” ì´ë‚´", "ì‚¬ìš© í›„ 6ê°œì›” ì´ë‚´"], answer: 1, explanation: "ì˜ˆë¹„ë¹„ ì‚¬ìš© í›„ ë‹¤ìŒ ì—°ë„ ì •ê¸°íšŒ ì¤‘ì— êµ­íšŒì˜ ìŠ¹ì¸ì„ ë°›ì•„ì•¼ í•©ë‹ˆë‹¤." },
    { category: "ì˜ˆì‚°íšŒê³„", question: "ì‚¬ê³ ì´ì›”ì˜ ìš”ê±´ì´ ì•„ë‹Œ ê²ƒì€?", options: ["ì—°ë„ ë‚´ ì§€ì¶œì›ì¸í–‰ìœ„", "ë¶ˆê°€í”¼í•œ ì‚¬ìœ ", "ì„¸ì…ì„¸ì¶œì˜ˆì‚°ì— ëª…ì‹œ", "ì—°ë„ ë‚´ ì§€ì¶œí•˜ì§€ ëª»í•œ ê²½ë¹„"], answer: 2, explanation: "ì„¸ì…ì„¸ì¶œì˜ˆì‚°ì— ëª…ì‹œí•˜ëŠ” ê²ƒì€ ëª…ì‹œì´ì›”ì˜ ìš”ê±´ì…ë‹ˆë‹¤." },
    { category: "ì˜ˆì‚°íšŒê³„", question: "ì˜ˆì‚°ì˜ ì „ìš©ì´ë€?", options: ["íšŒê³„ì—°ë„ ê°„ ì´ì›”", "í•­ ê°„ì˜ ìƒí˜¸ìœµí†µ", "ì„¸í•­Â·ëª© ê°„ì˜ ìƒí˜¸ìœµí†µ", "ì˜ˆë¹„ë¹„ ì‚¬ìš©"], answer: 2, explanation: "ì „ìš©ì€ í–‰ì •ê³¼ëª©ì¸ ì„¸í•­Â·ëª© ê°„ì˜ ìƒí˜¸ìœµí†µì„ ë§í•©ë‹ˆë‹¤." },
    { category: "ê³„ì•½", question: "ë¬¼í’ˆ êµ¬ë§¤ ì‹œ 1ì¸ ê²¬ì  ìˆ˜ì˜ê³„ì•½ì´ ê°€ëŠ¥í•œ ì¶”ì •ê°€ê²©(ë¶€ê°€ì„¸ ë³„ë„) ê¸°ì¤€ì€?", options: ["1ì²œë§Œì› ì´í•˜", "2ì²œë§Œì› ì´í•˜", "3ì²œë§Œì› ì´í•˜", "5ì²œë§Œì› ì´í•˜"], answer: 1, explanation: "ë¬¼í’ˆÂ·ìš©ì—­ì˜ ê²½ìš° ì¶”ì •ê°€ê²© 2ì²œë§Œì› ì´í•˜ì¼ ë•Œ 1ì¸ ê²¬ì  ìˆ˜ì˜ê³„ì•½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤." },
    { category: "ê³„ì•½", question: "ë‚˜ë¼ì¥í„° ì „ìì…ì°° ì‹œ ì…ì°°ê³µê³  ê¸°ê°„ì€ ìµœì†Œ ë©°ì¹ ì¸ê°€?", options: ["5ì¼", "7ì¼", "10ì¼", "14ì¼"], answer: 1, explanation: "ì „ìì…ì°°ì˜ ê²½ìš° ì…ì°°ê³µê³  ê¸°ê°„ì€ ìµœì†Œ 7ì¼ ì´ìƒì…ë‹ˆë‹¤." },
    { category: "ê³„ì•½", question: "ê³„ì•½ë³´ì¦ê¸ˆì˜ ì›ì¹™ì ì¸ ë¹„ìœ¨ì€?", options: ["ê³„ì•½ê¸ˆì•¡ì˜ 5%", "ê³„ì•½ê¸ˆì•¡ì˜ 10%", "ê³„ì•½ê¸ˆì•¡ì˜ 15%", "ê³„ì•½ê¸ˆì•¡ì˜ 20%"], answer: 1, explanation: "ê³„ì•½ë³´ì¦ê¸ˆì€ ê³„ì•½ê¸ˆì•¡ì˜ 10% ì´ìƒìœ¼ë¡œ ë‚©ë¶€í•´ì•¼ í•©ë‹ˆë‹¤." },
    { category: "ê³„ì•½", question: "ì„ ê¸ˆì˜ ì§€ê¸‰ í•œë„ëŠ”?", options: ["ê³„ì•½ê¸ˆì•¡ì˜ 50%", "ê³„ì•½ê¸ˆì•¡ì˜ 60%", "ê³„ì•½ê¸ˆì•¡ì˜ 70%", "ê³„ì•½ê¸ˆì•¡ì˜ 80%"], answer: 2, explanation: "ì„ ê¸ˆì€ ê³„ì•½ê¸ˆì•¡ì˜ 70% ì´ë‚´ì—ì„œ ì§€ê¸‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
    { category: "ê³„ì•½", question: "ë³µìˆ˜ì˜ˆë¹„ê°€ê²© ì‘ì„± ê°œìˆ˜ëŠ”?", options: ["10ê°œ", "15ê°œ", "20ê°œ", "25ê°œ"], answer: 1, explanation: "ë³µìˆ˜ì˜ˆë¹„ê°€ê²©ì€ 15ê°œë¥¼ ì‘ì„±í•©ë‹ˆë‹¤." },
    { category: "ë³µë¬´", question: "ê³µë¬´ì›ì˜ ë³‘ê°€ ì¼ìˆ˜ëŠ” ì—°ê°„ ìµœëŒ€ ë©°ì¹ ì¸ê°€?", options: ["30ì¼", "60ì¼", "90ì¼", "120ì¼"], answer: 1, explanation: "ê³µë¬´ì›ì˜ ë³‘ê°€ëŠ” ì—° 60ì¼ ì´ë‚´ì…ë‹ˆë‹¤." },
    { category: "ë³µë¬´", question: "ì¬ì§ê¸°ê°„ 1ë…„ ë¯¸ë§Œ ê³µë¬´ì›ì˜ ì—°ê°€ ì¼ìˆ˜ëŠ”?", options: ["8ì¼", "11ì¼", "14ì¼", "15ì¼"], answer: 1, explanation: "ì¬ì§ê¸°ê°„ 1ë…„ ë¯¸ë§Œ ê³µë¬´ì›ì˜ ì—°ê°€ ì¼ìˆ˜ëŠ” 11ì¼ì…ë‹ˆë‹¤." },
    { category: "ë³µë¬´", question: "ë°°ìš°ì ì¶œì‚°íœ´ê°€ ì¼ìˆ˜ëŠ”?", options: ["5ì¼", "10ì¼", "15ì¼", "20ì¼"], answer: 3, explanation: "ë°°ìš°ì ì¶œì‚°íœ´ê°€ëŠ” 20ì¼ì…ë‹ˆë‹¤. (2025ë…„ ê³µë¬´ì›ë³µë¬´ê·œì • ê°œì •)" },
    { category: "ë¬¸ì„œ", question: "ê³µë¬¸ì„œì˜ ë³´ì¡´ê¸°ê°„ ì¤‘ 'ì˜êµ¬'ì— í•´ë‹¹í•˜ëŠ” ê²ƒì€?", options: ["ì¼ë°˜ í†µê³„ìë£Œ", "ì¡°ë¡€Â·ê·œì¹™", "ë‹¨ìˆœ ë¯¼ì›ì„œë¥˜", "ì¼ì¼ì—…ë¬´ë³´ê³ "], answer: 1, explanation: "ì¡°ë¡€, ê·œì¹™ ë“± ë²•ê·œë¬¸ì„œëŠ” ì˜êµ¬ ë³´ì¡´ ëŒ€ìƒì…ë‹ˆë‹¤." },
    { category: "ë¯¼ì›", question: "ì •ë³´ê³µê°œ ì²­êµ¬ì— ëŒ€í•œ ê²°ì • ê¸°í•œì€?", options: ["5ì¼ ì´ë‚´", "7ì¼ ì´ë‚´", "10ì¼ ì´ë‚´", "14ì¼ ì´ë‚´"], answer: 2, explanation: "ì •ë³´ê³µê°œ ì²­êµ¬ë¥¼ ë°›ì€ ë‚ ë¶€í„° 10ì¼ ì´ë‚´ì— ê³µê°œ ì—¬ë¶€ë¥¼ ê²°ì •í•´ì•¼ í•©ë‹ˆë‹¤." },
    { category: "ê°ì‚¬", question: "ì¼ìƒê°ì‚¬ ëŒ€ìƒì´ ì•„ë‹Œ ê²ƒì€?", options: ["ê³„ì•½", "ì˜ˆì‚° ì „ìš©", "êµ­ê³ ë³´ì¡°ê¸ˆ êµë¶€", "ì¼ë°˜ ë¯¼ì›ì²˜ë¦¬"], answer: 3, explanation: "ì¼ë°˜ ë¯¼ì›ì²˜ë¦¬ëŠ” ì¼ìƒê°ì‚¬ ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤." },
    { category: "ì¸ì‚¬", question: "5ê¸‰ ê³µë¬´ì›ì˜ ì •ë…„ì€?", options: ["58ì„¸", "60ì„¸", "62ì„¸", "65ì„¸"], answer: 1, explanation: "ì¼ë°˜ì§ ê³µë¬´ì›ì˜ ì •ë…„ì€ 60ì„¸ì…ë‹ˆë‹¤." },
    { category: "ê³„ì•½", question: "ì§€ì²´ìƒê¸ˆë¥ ì˜ ìƒí•œì€?", options: ["ê³„ì•½ê¸ˆì•¡ì˜ 10%", "ê³„ì•½ê¸ˆì•¡ì˜ 15%", "ê³„ì•½ê¸ˆì•¡ì˜ 20%", "ê³„ì•½ê¸ˆì•¡ì˜ 30%"], answer: 0, explanation: "ì§€ì²´ìƒê¸ˆì€ ê³„ì•½ê¸ˆì•¡ì˜ 10%ë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." },
    { category: "ì˜ˆì‚°íšŒê³„", question: "ì§€ë°©ìì¹˜ë‹¨ì²´ì˜ ì¶œë‚©íì‡„ì¼ì€?", options: ["12ì›” 31ì¼", "ë‹¤ìŒ ì—°ë„ 1ì›” 31ì¼", "ë‹¤ìŒ ì—°ë„ 2ì›” ë§ì¼", "ë‹¤ìŒ ì—°ë„ 3ì›” 31ì¼"], answer: 2, explanation: "ì§€ë°©ìì¹˜ë‹¨ì²´ì˜ ì¶œë‚©íì‡„ì¼ì€ ë‹¤ìŒ ì—°ë„ 2ì›” ë§ì¼ì…ë‹ˆë‹¤." },
    { category: "ë³µë¬´", question: "ì‹œê°„ì™¸ê·¼ë¬´ìˆ˜ë‹¹ ì§€ê¸‰ ë‹¨ê°€ ì‚°ì • ì‹œ ì‚¬ìš©í•˜ëŠ” ë¶„ëª¨ëŠ”?", options: ["174ì‹œê°„", "209ì‹œê°„", "226ì‹œê°„", "243ì‹œê°„"], answer: 1, explanation: "ì‹œê°„ì™¸ê·¼ë¬´ìˆ˜ë‹¹ì€ ì›” ë´‰ê¸‰ì•¡ì„ 209ì‹œê°„ìœ¼ë¡œ ë‚˜ëˆˆ ê¸ˆì•¡ì„ ê¸°ì¤€ìœ¼ë¡œ ì‚°ì •í•©ë‹ˆë‹¤." }
  ];

  function getDailyQuiz() {
    const today = new Date();
    const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
    const shuffled = [...allQuizData];
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor((seed * (i + 1) * 9301 + 49297) % 233280 / 233280 * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled.slice(0, 5);
  }

  const quizData = getDailyQuiz();
  let currentQuestion = 0, score = 0, selectedOption = null, answered = false;
  const progressEl = document.getElementById('quiz-progress');
  if (!progressEl) return;
  const categoryEl = document.getElementById('quiz-category');
  const questionEl = document.getElementById('quiz-question');
  const optionsEl = document.getElementById('quiz-options');
  const resultDiv = document.getElementById('quiz-result');
  const resultMessage = document.getElementById('result-message');
  const resultExplanation = document.getElementById('result-explanation');
  const submitBtn = document.getElementById('quiz-submit');
  const finalDiv = document.getElementById('quiz-final');
  const finalScore = document.getElementById('final-score');
  const footerDiv = document.getElementById('quiz-footer');
  const restartBtn = document.getElementById('quiz-restart');

  function renderQuestion() {
    const q = quizData[currentQuestion];
    progressEl.textContent = `ë¬¸ì œ ${currentQuestion + 1}/5`;
    categoryEl.textContent = q.category;
    questionEl.textContent = q.question;
    optionsEl.innerHTML = q.options.map((opt, i) => `
      <button data-index="${i}" class="quiz-option w-full text-left p-4 rounded-xl bg-slate-800/50 hover:bg-slate-700/50 border border-white/5 text-slate-200 text-sm transition-all cursor-pointer flex items-center gap-3">
        <span class="w-7 h-7 rounded-full border border-white/20 flex items-center justify-center text-xs font-medium shrink-0">${String.fromCharCode(65+i)}</span>
        <span>${opt}</span>
      </button>
    `).join('');
    document.querySelectorAll('.quiz-option').forEach(o => o.addEventListener('click', handleOptionClick));
    selectedOption = null; answered = false;
    resultDiv.classList.add('hidden');
    resultDiv.classList.remove('bg-emerald-500/20','bg-red-500/20');
    resultMessage.classList.remove('text-emerald-300','text-red-300');
    submitBtn.disabled = true;
    submitBtn.textContent = 'ì •ë‹µ í™•ì¸';
  }

  function handleOptionClick() {
    if (answered) return;
    document.querySelectorAll('.quiz-option').forEach(o => { o.classList.remove('bg-indigo-600/30','border-indigo-400'); o.classList.add('bg-slate-800/50','border-white/5'); });
    this.classList.remove('bg-slate-800/50','border-white/5');
    this.classList.add('bg-indigo-600/30','border-indigo-400');
    selectedOption = this;
    submitBtn.disabled = false;
  }

  function handleSubmit() {
    if (!selectedOption) return;
    if (!answered) {
      answered = true;
      const q = quizData[currentQuestion];
      const si = parseInt(selectedOption.dataset.index);
      const correct = si === q.answer;
      if (correct) score++;
      document.querySelectorAll('.quiz-option').forEach(o => {
        o.classList.add('cursor-not-allowed');
        const idx = parseInt(o.dataset.index);
        if (idx === q.answer) { o.classList.remove('bg-slate-800/50','bg-indigo-600/30'); o.classList.add('bg-emerald-600/30','border-emerald-400'); }
        else if (o === selectedOption && !correct) { o.classList.remove('bg-indigo-600/30'); o.classList.add('bg-red-500/30','border-red-400'); }
      });
      resultDiv.classList.remove('hidden');
      if (correct) { resultDiv.classList.add('bg-emerald-500/20'); resultMessage.textContent = 'ì •ë‹µì…ë‹ˆë‹¤!'; resultMessage.classList.add('text-emerald-300'); }
      else { resultDiv.classList.add('bg-red-500/20'); resultMessage.textContent = 'ì˜¤ë‹µì…ë‹ˆë‹¤.'; resultMessage.classList.add('text-red-300'); }
      resultExplanation.textContent = q.explanation;
      submitBtn.textContent = currentQuestion < quizData.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ â†’' : 'ê²°ê³¼ ë³´ê¸°';
    } else {
      if (currentQuestion < quizData.length - 1) { currentQuestion++; renderQuestion(); }
      else { questionEl.classList.add('hidden'); optionsEl.classList.add('hidden'); resultDiv.classList.add('hidden'); footerDiv.classList.add('hidden'); finalDiv.classList.remove('hidden'); finalScore.textContent = score; }
    }
  }

  submitBtn.addEventListener('click', handleSubmit);
  restartBtn.addEventListener('click', function() {
    currentQuestion = 0; score = 0;
    questionEl.classList.remove('hidden'); optionsEl.classList.remove('hidden');
    footerDiv.classList.remove('hidden'); finalDiv.classList.add('hidden');
    renderQuestion();
  });
  renderQuestion();
});
</script>
