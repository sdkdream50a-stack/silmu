<%# ì˜ˆë¹„ë¹„ í•œë„ ê³„ì‚°ê¸° %>

<section class="section py-10">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- ë’¤ë¡œê°€ê¸° -->
    <div class="mb-6">
      <%= link_to tools_path, class: "inline-flex items-center text-slate-600 hover:text-indigo-600 transition-colors font-medium" do %>
        <span class="material-symbols-outlined mr-1">arrow_back</span>
        ë„êµ¬ ëª©ë¡ìœ¼ë¡œ
      <% end %>
    </div>

    <!-- í˜ì´ì§€ í—¤ë” -->
    <div class="mb-8">
      <div class="flex items-center gap-4 mb-4">
        <div class="icon-container icon-container-lg gradient-indigo shadow-lg">
          <span class="material-symbols-outlined text-3xl text-white">savings</span>
        </div>
        <div>
          <h1 class="text-2xl font-bold text-slate-900">ì˜ˆë¹„ë¹„ í•œë„ ê³„ì‚°ê¸°</h1>
          <p class="text-slate-500">ì˜ˆì‚° ê·œëª¨ë³„ ë²•ì • ì˜ˆë¹„ë¹„ í•œë„ì™€ ì ì • í¸ì„± ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤</p>
        </div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border border-indigo-100 p-6 mt-6">
        <h2 class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
          <span class="material-symbols-outlined text-indigo-600">info</span>
          ì´ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
        </h2>
        <div class="prose prose-slate prose-sm max-w-none">
          <p class="text-slate-700 leading-relaxed mb-3">
            ì˜ˆë¹„ë¹„ëŠ” ì˜ˆì¸¡í•˜ê¸° ì–´ë ¤ìš´ ì§€ì¶œì— ëŒ€ë¹„í•˜ì—¬ í¸ì„±í•˜ëŠ” ì˜ˆì‚°ìœ¼ë¡œ, <strong>ì§€ë°©ì¬ì •ë²• ì œ43ì¡°</strong>ì— ë”°ë¼ ì¼ë°˜ì˜ˆë¹„ë¹„ëŠ” ì¼ë°˜íšŒê³„ ì˜ˆì‚° ì´ì•¡ì˜
            <strong>1% ì´ë‚´</strong>ë¡œ í¸ì„±í•˜ë„ë¡ ê·œì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ëª©ì ì˜ˆë¹„ë¹„(ì¬ë‚œÂ·ì¬í•´ ëŒ€ì‘ ë“±)ëŠ” ë³„ë„ í¸ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.
          </p>
          <p class="text-slate-700 leading-relaxed mb-3">
            ì˜ˆë¹„ë¹„ë¥¼ ê³¼ë‹¤ í¸ì„±í•˜ë©´ ì‹¤ì§ˆ ì‚¬ì—…ì˜ˆì‚°ì´ ì¤„ì–´ë“¤ê³ , ê³¼ì†Œ í¸ì„±í•˜ë©´ ì˜ˆì¸¡ ëª»í•œ ì§€ì¶œ ë°œìƒ ì‹œ ì¶”ê°€ê²½ì •ì˜ˆì‚° í¸ì„± ë“± í–‰ì • ë¶€ë‹´ì´ ì¦ê°€í•©ë‹ˆë‹¤.
            ì´ ë„êµ¬ëŠ” ì˜ˆì‚° ì´ì•¡ì„ ì…ë ¥í•˜ë©´ <strong>ë²•ì • í•œë„ì™€ ê¶Œì¥ í¸ì„± ë²”ìœ„</strong>ë¥¼ ìë™ ê³„ì‚°í•©ë‹ˆë‹¤.
          </p>
          <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded-r-lg mt-4">
            <p class="text-blue-900 text-xs leading-relaxed">
              <strong>ğŸ“Œ ì°¸ê³ :</strong> ì§€ë°©ì¬ì •ë²• ì œ43ì¡° ì œ1í•­: "ì§€ë°©ìì¹˜ë‹¨ì²´ëŠ” ì˜ˆì¸¡í•  ìˆ˜ ì—†ëŠ” ì˜ˆì‚° ì™¸ì˜ ì§€ì¶œ ë˜ëŠ” ì˜ˆì‚° ì´ˆê³¼ ì§€ì¶œì— ì¶©ë‹¹í•˜ê¸° ìœ„í•˜ì—¬ ì¼ë°˜íšŒê³„ ì˜ˆì‚° ì´ì•¡ì˜ 100ë¶„ì˜ 1 ì´ë‚´ì˜ ê¸ˆì•¡ì„ ì˜ˆë¹„ë¹„ë¡œ ì˜ˆì‚°ì— ê³„ìƒí•  ìˆ˜ ìˆë‹¤."
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="lg:flex lg:gap-8">
      <!-- ì…ë ¥ í¼ -->
      <div class="lg:w-1/2 mb-8 lg:mb-0">
        <div class="card p-6">
          <h2 class="text-lg font-bold text-slate-900 mb-6 flex items-center gap-2">
            <span class="material-symbols-outlined text-indigo-600">edit</span>
            ì˜ˆì‚° ì •ë³´ ì…ë ¥
          </h2>

          <!-- ìì¹˜ë‹¨ì²´ ìœ í˜• -->
          <div class="mb-5">
            <label class="block text-sm font-semibold text-slate-700 mb-2">ìì¹˜ë‹¨ì²´ ìœ í˜•</label>
            <select id="entity-type" class="form-input w-full" onchange="calculate()">
              <option value="general">ì‹œÂ·êµ°Â·êµ¬ (ì¼ë°˜ì‹œêµ°êµ¬)</option>
              <option value="metro">íŠ¹ë³„ì‹œÂ·ê´‘ì—­ì‹œÂ·ë„</option>
              <option value="special">íŠ¹ë³„ìì¹˜ì‹œÂ·íŠ¹ë³„ìì¹˜ë„</option>
            </select>
          </div>

          <!-- íšŒê³„ êµ¬ë¶„ -->
          <div class="mb-5">
            <label class="block text-sm font-semibold text-slate-700 mb-2">íšŒê³„ êµ¬ë¶„</label>
            <select id="account-type" class="form-input w-full" onchange="calculate()">
              <option value="general">ì¼ë°˜íšŒê³„</option>
              <option value="special">íŠ¹ë³„íšŒê³„</option>
            </select>
            <p class="text-xs text-slate-400 mt-1">ì˜ˆë¹„ë¹„ í•œë„ëŠ” íšŒê³„ êµ¬ë¶„ë³„ë¡œ ì ìš©ë©ë‹ˆë‹¤</p>
          </div>

          <!-- ì˜ˆì‚° ì´ì•¡ -->
          <div class="mb-5">
            <label class="block text-sm font-semibold text-slate-700 mb-2">
              ì˜ˆì‚° ì´ì•¡
              <span class="text-xs font-normal text-slate-400 ml-1">(ì„¸ì¶œì˜ˆì‚° ì´ê³„ ê¸°ì¤€)</span>
            </label>
            <div class="relative">
              <input type="number" id="total-budget" placeholder="ì˜ˆ: 500,000,000" min="0" step="1000000"
                class="form-input w-full pr-10" oninput="calculate()">
              <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">ì›</span>
            </div>
            <p class="text-xs text-slate-400 mt-1">ë‹¹ì´ˆì˜ˆì‚° + ì¶”ê°€ê²½ì •ì˜ˆì‚° ê¸°ì¤€ (ì²œì› ë‹¨ìœ„ ì •í™•íˆ ì…ë ¥)</p>
          </div>

          <!-- í˜„ì¬ í¸ì„± ì˜ˆë¹„ë¹„ -->
          <div class="mb-6">
            <label class="block text-sm font-semibold text-slate-700 mb-2">
              í˜„ì¬ í¸ì„± ì˜ˆë¹„ë¹„
              <span class="text-xs font-normal text-slate-400 ml-1">(ì—†ìœ¼ë©´ 0 ì…ë ¥)</span>
            </label>
            <div class="relative">
              <input type="number" id="current-reserve" placeholder="0" min="0" step="1000000"
                class="form-input w-full pr-10" oninput="calculate()">
              <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">ì›</span>
            </div>
          </div>

          <!-- ëª©ì ì˜ˆë¹„ë¹„ í¬í•¨ ì—¬ë¶€ -->
          <div class="mb-6">
            <label class="flex items-center gap-3 cursor-pointer">
              <input type="checkbox" id="include-purpose" class="w-4 h-4 rounded" onchange="calculate()">
              <div>
                <span class="text-sm font-semibold text-slate-700">ëª©ì ì˜ˆë¹„ë¹„ ë³„ë„ í¸ì„± ì˜ˆì •</span>
                <p class="text-xs text-slate-400">ì¬ë‚œÂ·ì¬í•´ ëŒ€ì‘ ë“± íŠ¹ì • ëª©ì  ì˜ˆë¹„ë¹„ëŠ” í•œë„ ì™¸ ë³„ë„ í¸ì„± ê°€ëŠ¥</p>
              </div>
            </label>
            <div id="purpose-input" class="mt-3 hidden">
              <div class="relative">
                <input type="number" id="purpose-amount" placeholder="ëª©ì ì˜ˆë¹„ë¹„ ê¸ˆì•¡" min="0" step="1000000"
                  class="form-input w-full pr-10" oninput="calculate()">
                <span class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 text-sm">ì›</span>
              </div>
            </div>
          </div>

          <button type="button" onclick="calculate()" class="w-full btn btn-point btn-md">
            <span class="material-symbols-outlined">calculate</span>
            í•œë„ ê³„ì‚°
          </button>
        </div>
      </div>

      <!-- ê²°ê³¼ -->
      <div class="lg:w-1/2">
        <div class="card p-6 h-full">
          <h2 class="text-lg font-bold text-slate-900 mb-6 flex items-center gap-2">
            <span class="material-symbols-outlined text-indigo-600">analytics</span>
            ì˜ˆë¹„ë¹„ í•œë„ ë¶„ì„
          </h2>

          <!-- ì´ˆê¸° ì•ˆë‚´ -->
          <div id="empty-state" class="flex flex-col items-center justify-center h-48 text-slate-300">
            <span class="material-symbols-outlined text-5xl mb-3">savings</span>
            <p class="text-sm">ì˜ˆì‚° ì´ì•¡ì„ ì…ë ¥í•˜ë©´ í•œë„ê°€ ê³„ì‚°ë©ë‹ˆë‹¤</p>
          </div>

          <!-- ê²°ê³¼ ì˜ì—­ -->
          <div id="result-area" class="hidden">
            <!-- í•œë„ í˜„í™© -->
            <div id="limit-card" class="rounded-xl p-4 mb-5">
              <div class="text-sm font-medium mb-1" id="limit-label">ë²•ì • ìµœëŒ€ í•œë„</div>
              <div id="limit-amount" class="text-3xl font-bold mb-1">-</div>
              <div id="limit-desc" class="text-xs opacity-80">ì˜ˆì‚° ì´ì•¡ì˜ 1% ì´ë‚´</div>
            </div>

            <!-- ìˆ˜ì¹˜ ë¹„êµ -->
            <div class="grid grid-cols-2 gap-3 mb-5">
              <div class="bg-white border border-slate-100 rounded-xl p-3 text-center">
                <div class="text-xs text-slate-400 mb-1">ë²•ì • ìµœëŒ€ í•œë„</div>
                <div id="max-limit" class="text-base font-bold text-indigo-700">-</div>
              </div>
              <div class="bg-white border border-slate-100 rounded-xl p-3 text-center">
                <div class="text-xs text-slate-400 mb-1">í˜„ì¬ í¸ì„±ì•¡</div>
                <div id="current-amount" class="text-base font-bold text-slate-700">-</div>
              </div>
              <div class="bg-white border border-slate-100 rounded-xl p-3 text-center">
                <div class="text-xs text-slate-400 mb-1">ì ì • í¸ì„± ë²”ìœ„</div>
                <div id="recommended-range" class="text-sm font-bold text-green-600">-</div>
              </div>
              <div class="bg-white border border-slate-100 rounded-xl p-3 text-center">
                <div class="text-xs text-slate-400 mb-1">ëª©ì ì˜ˆë¹„ë¹„</div>
                <div id="purpose-display" class="text-base font-bold text-purple-600">-</div>
              </div>
            </div>

            <!-- ìƒíƒœ ë©”ì‹œì§€ -->
            <div id="status-message" class="rounded-xl p-4 text-sm mb-4"></div>

            <!-- ì‚¬ìš© ê°€ëŠ¥ ì˜ˆë¹„ë¹„ ì”ì•¡ -->
            <div class="bg-slate-50 rounded-xl p-4">
              <div class="text-xs font-semibold text-slate-500 mb-2">ì˜ˆë¹„ë¹„ ì‚¬ìš© ì‹œ ì”ì•¡ ì‹œë®¬ë ˆì´ì…˜</div>
              <div class="mb-3">
                <label class="block text-xs text-slate-500 mb-1">ì‚¬ìš© ì˜ˆì •ì•¡ (ì›)</label>
                <input type="number" id="usage-amount" placeholder="0" min="0" step="100000"
                  class="form-input w-full text-sm" oninput="simulateUsage()">
              </div>
              <div id="usage-result" class="text-sm text-slate-500 text-center py-2">ê¸ˆì•¡ì„ ì…ë ¥í•˜ë©´ ì”ì•¡ì´ ê³„ì‚°ë©ë‹ˆë‹¤</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ì˜ˆë¹„ë¹„ ë²•ë ¹ ì•ˆë‚´ -->
    <div class="mt-8 card p-6">
      <h3 class="text-base font-bold text-slate-900 mb-4 flex items-center gap-2">
        <span class="material-symbols-outlined text-amber-600">gavel</span>
        ì˜ˆë¹„ë¹„ ê´€ë ¨ ë²•ë ¹ ì•ˆë‚´
      </h3>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
        <div class="bg-blue-50 rounded-xl p-4">
          <div class="font-semibold text-blue-800 mb-2">ğŸ“‹ ì¼ë°˜ì˜ˆë¹„ë¹„ (ì œ43ì¡°)</div>
          <ul class="text-blue-700 space-y-1 text-xs">
            <li>â€¢ ì¼ë°˜íšŒê³„ ì˜ˆì‚° ì´ì•¡ì˜ 1% ì´ë‚´</li>
            <li>â€¢ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì§€ì¶œ ëŒ€ë¹„</li>
            <li>â€¢ í–‰ì •ì•ˆì „ë¶€ì¥ê´€ ìŠ¹ì¸ ë¶ˆí•„ìš”</li>
            <li>â€¢ ë‹¨ì²´ì¥ ì¬ëŸ‰ìœ¼ë¡œ ë°°ì •</li>
          </ul>
        </div>
        <div class="bg-purple-50 rounded-xl p-4">
          <div class="font-semibold text-purple-800 mb-2">ğŸ¯ ëª©ì ì˜ˆë¹„ë¹„</div>
          <ul class="text-purple-700 space-y-1 text-xs">
            <li>â€¢ íŠ¹ì • ìš©ë„ ì§€ì • ì˜ˆë¹„ë¹„</li>
            <li>â€¢ ì¬ë‚œÂ·ì¬í•´ ëŒ€ì‘ ë“±</li>
            <li>â€¢ 1% í•œë„ ì™¸ ë³„ë„ í¸ì„±</li>
            <li>â€¢ ì§€ì • ëª©ì ì—ë§Œ ì‚¬ìš© ê°€ëŠ¥</li>
          </ul>
        </div>
        <div class="bg-amber-50 rounded-xl p-4">
          <div class="font-semibold text-amber-800 mb-2">âš ï¸ ì˜ˆë¹„ë¹„ ì‚¬ìš© ì ˆì°¨</div>
          <ul class="text-amber-700 space-y-1 text-xs">
            <li>â€¢ ê¸´ê¸‰Â·ë¶ˆê°€í”¼í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©</li>
            <li>â€¢ ë‹¨ì²´ì¥ ê²°ì¬ í›„ ì§‘í–‰</li>
            <li>â€¢ ë‹¤ìŒ ì—°ë„ ì˜ˆì‚°ì— ë°˜ì˜ ë³´ê³ </li>
            <li>â€¢ ì˜íšŒ ìŠ¹ì¸ì€ ì‚¬í›„ ì •ë¦¬ê²°ì‚° ì‹œ</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // ëª©ì ì˜ˆë¹„ë¹„ ì²´í¬ë°•ìŠ¤
  document.getElementById('include-purpose').addEventListener('change', function() {
    document.getElementById('purpose-input').classList.toggle('hidden', !this.checked);
    calculate();
  });

  let calculatedReserve = 0;

  function calculate() {
    const budget = parseFloat(document.getElementById('total-budget').value) || 0;
    const current = parseFloat(document.getElementById('current-reserve').value) || 0;
    const includePurpose = document.getElementById('include-purpose').checked;
    const purposeAmount = includePurpose ? (parseFloat(document.getElementById('purpose-amount')?.value) || 0) : 0;

    if (budget <= 0) {
      document.getElementById('empty-state').classList.remove('hidden');
      document.getElementById('result-area').classList.add('hidden');
      return;
    }

    document.getElementById('empty-state').classList.add('hidden');
    document.getElementById('result-area').classList.remove('hidden');

    const maxLimit = Math.floor(budget * 0.01);
    const recommended_min = Math.floor(budget * 0.005);
    const recommended_max = maxLimit;

    calculatedReserve = current;

    // í•œë„ ì¹´ë“œ
    const limitCard = document.getElementById('limit-card');
    limitCard.className = 'rounded-xl p-4 mb-5 bg-indigo-50';
    document.getElementById('limit-label').textContent = 'ë²•ì • ìµœëŒ€ í•œë„ (ì˜ˆì‚° ì´ì•¡ì˜ 1%)';
    document.getElementById('limit-label').className = 'text-sm font-medium mb-1 text-indigo-600';
    document.getElementById('limit-amount').textContent = formatKRW(maxLimit);
    document.getElementById('limit-amount').className = 'text-3xl font-bold mb-1 text-indigo-700';
    document.getElementById('limit-desc').textContent = `ì˜ˆì‚° ì´ì•¡ ${formatKRW(budget)} Ã— 1%`;
    document.getElementById('limit-desc').className = 'text-xs text-indigo-500';

    // ìˆ˜ì¹˜
    document.getElementById('max-limit').textContent = formatKRW(maxLimit);
    document.getElementById('current-amount').textContent = current > 0 ? formatKRW(current) : 'ë¯¸ì…ë ¥';
    document.getElementById('recommended-range').textContent = `${formatKRW(recommended_min)} ~ ${formatKRW(recommended_max)}`;
    document.getElementById('purpose-display').textContent = includePurpose && purposeAmount > 0 ? formatKRW(purposeAmount) : 'ì—†ìŒ';

    // ìƒíƒœ ë©”ì‹œì§€
    const statusEl = document.getElementById('status-message');
    if (current <= 0) {
      statusEl.className = 'rounded-xl p-4 text-sm mb-4 bg-slate-50 border border-slate-200 text-slate-600';
      statusEl.innerHTML = `<div class="font-semibold mb-1">ğŸ“Š ì˜ˆë¹„ë¹„ í¸ì„± ê°€ì´ë“œ</div>
        <div class="text-xs">ì ì • í¸ì„±ì•¡: <strong>${formatKRW(recommended_min)} ~ ${formatKRW(recommended_max)}</strong><br>
        ì¼ë°˜ì ìœ¼ë¡œ ì˜ˆì‚° ì´ì•¡ì˜ <strong>0.5~1.0%</strong> ë²”ìœ„ì—ì„œ í¸ì„±í•˜ëŠ” ê²ƒì´ ê¶Œì¥ë©ë‹ˆë‹¤.</div>`;
    } else if (current > maxLimit) {
      statusEl.className = 'rounded-xl p-4 text-sm mb-4 bg-red-50 border border-red-200 text-red-800';
      const excess = current - maxLimit;
      statusEl.innerHTML = `<div class="font-semibold mb-1">âŒ ë²•ì • í•œë„ ì´ˆê³¼</div>
        <div class="text-xs">í˜„ì¬ í¸ì„±ì•¡ì´ ë²•ì • í•œë„ë¥¼ <strong>${formatKRW(excess)}</strong> ì´ˆê³¼í•©ë‹ˆë‹¤.<br>
        ì˜ˆì‚°ì„ <strong>${formatKRW(maxLimit)}</strong> ì´í•˜ë¡œ ì¡°ì •í•´ì•¼ í•©ë‹ˆë‹¤.</div>`;
    } else if (current >= recommended_min) {
      statusEl.className = 'rounded-xl p-4 text-sm mb-4 bg-green-50 border border-green-200 text-green-800';
      const remaining = maxLimit - current;
      statusEl.innerHTML = `<div class="font-semibold mb-1">âœ… ì ì • í¸ì„±</div>
        <div class="text-xs">ë²•ì • í•œë„(${formatKRW(maxLimit)}) ëŒ€ë¹„ <strong>${formatKRW(remaining)}</strong> ì¶”ê°€ í¸ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
        í˜„ì¬ í¸ì„±ë¥ : ì˜ˆì‚° ì´ì•¡ì˜ ${(current / budget * 100).toFixed(2)}%</div>`;
    } else {
      statusEl.className = 'rounded-xl p-4 text-sm mb-4 bg-amber-50 border border-amber-200 text-amber-800';
      statusEl.innerHTML = `<div class="font-semibold mb-1">âš¡ í¸ì„± ë¶€ì¡± ê°€ëŠ¥ì„±</div>
        <div class="text-xs">í˜„ì¬ í¸ì„±ì•¡ì´ ê¶Œì¥ ìµœì†Œì•¡(${formatKRW(recommended_min)})ë³´ë‹¤ ì ìŠµë‹ˆë‹¤.<br>
        ì˜ˆì¸¡ ë¶ˆê°€ ì§€ì¶œ ë°œìƒ ì‹œ ì¶”ê²½ í¸ì„±ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>`;
    }

    document.getElementById('usage-result').textContent = 'ê¸ˆì•¡ì„ ì…ë ¥í•˜ë©´ ì”ì•¡ì´ ê³„ì‚°ë©ë‹ˆë‹¤';
    document.getElementById('usage-amount').value = '';
  }

  function simulateUsage() {
    const usage = parseFloat(document.getElementById('usage-amount').value) || 0;
    const current = parseFloat(document.getElementById('current-reserve').value) || 0;
    const resultEl = document.getElementById('usage-result');

    if (usage <= 0 || current <= 0) {
      resultEl.textContent = 'ê¸ˆì•¡ì„ ì…ë ¥í•˜ë©´ ì”ì•¡ì´ ê³„ì‚°ë©ë‹ˆë‹¤';
      return;
    }

    const balance = current - usage;
    if (balance < 0) {
      resultEl.innerHTML = `<span class="text-red-600 font-semibold">âš ï¸ ì”ì•¡ ë¶€ì¡±: ${formatKRW(Math.abs(balance))} ì´ˆê³¼ ì‚¬ìš©</span>`;
    } else {
      resultEl.innerHTML = `ì‚¬ìš© í›„ ì”ì•¡: <strong class="text-green-600">${formatKRW(balance)}</strong> (ì˜ˆì‚° ì´ì•¡ì˜ ${(balance / (parseFloat(document.getElementById('total-budget').value) || 1) * 100).toFixed(3)}%)`;
    }
  }

  function formatKRW(n) {
    if (n >= 100000000) {
      const eo = Math.floor(n / 100000000);
      const man = Math.floor((n % 100000000) / 10000);
      if (man > 0) return `${eo}ì–µ ${man.toLocaleString('ko-KR')}ë§Œì›`;
      return `${eo}ì–µì›`;
    } else if (n >= 10000) {
      return `${Math.floor(n / 10000).toLocaleString('ko-KR')}ë§Œì›`;
    }
    return `${n.toLocaleString('ko-KR')}ì›`;
  }
</script>
