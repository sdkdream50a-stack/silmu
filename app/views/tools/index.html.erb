<%# 실무 도구 목록 페이지 - 프리미엄 디자인 시스템 %>

<!-- 페이지 헤더 -->
<section class="gradient-point text-white py-12 lg:py-16">
  <div class="container-wide">
    <div class="flex items-start gap-5">
      <div class="w-16 h-16 bg-white/10 backdrop-blur-md rounded-2xl flex items-center justify-center border border-white/20 shadow-lg">
        <span class="material-symbols-outlined text-4xl text-white">construction</span>
      </div>
      <div>
        <h1 class="text-3xl lg:text-4xl font-bold tracking-tight mb-2">실무 도구</h1>
        <p class="text-point-100 text-lg">복잡한 계산과 검토를 간편하게</p>
      </div>
    </div>
  </div>
</section>

<!-- 카테고리 탭 -->
<section class="bg-white/80 backdrop-blur-xl border-b border-gray-100 sticky top-16 z-40 shadow-soft">
  <div class="container-wide">
    <div class="flex gap-2 overflow-x-auto py-4 scrollbar-hide" id="category-tabs">
      <button data-category="전체" class="tab-btn active px-6 py-2.5 bg-point-600 text-white rounded-xl text-sm font-semibold whitespace-nowrap shadow-md transition-all">전체</button>
      <button data-category="계산기" class="tab-btn px-6 py-2.5 bg-surface-100 text-navy-600 hover:bg-surface-200 rounded-xl text-sm font-medium transition-all whitespace-nowrap">계산기</button>
      <button data-category="AI 도구" class="tab-btn px-6 py-2.5 bg-surface-100 text-navy-600 hover:bg-surface-200 rounded-xl text-sm font-medium transition-all whitespace-nowrap">AI 도구</button>
      <button data-category="체크리스트" class="tab-btn px-6 py-2.5 bg-surface-100 text-navy-600 hover:bg-surface-200 rounded-xl text-sm font-medium transition-all whitespace-nowrap">체크리스트</button>
    </div>
  </div>
</section>

<!-- 도구 그리드 -->
<section class="section py-12">
  <div class="container-wide">
    <div class="flex items-center justify-between mb-6">
      <p class="text-navy-600">총 <span class="font-bold text-navy-900" id="item-count">9</span>개의 도구</p>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="items-grid">
      <% [
        { title: "여비계산기", desc: "출장 여비(운임, 숙박비, 식비, 일비)를 자동으로 계산합니다.", icon: "directions_car", color: "point", category: "계산기", path: travel_calculator_path },
        { title: "초과근무수당 계산기", desc: "시간외근무, 야간근무, 휴일근무 수당을 계산합니다.", icon: "schedule", color: "forest", category: "계산기", path: "#" },
        { title: "연가일수 계산기", desc: "재직기간에 따른 연가일수를 자동 계산합니다.", icon: "event_available", color: "navy", category: "계산기", path: "#" },
        { title: "공문서 AI 작성 도우미", desc: "AI가 공문서 초안을 작성해 드립니다.", icon: "auto_awesome", color: "warm", category: "AI 도구", path: "#", badge: "NEW" },
        { title: "예정가격 계산기", desc: "복수예비가격 및 예정가격을 산출합니다.", icon: "calculate", color: "forest", category: "계산기", path: "#" },
        { title: "계약 체크리스트", desc: "계약 단계별 필수 확인사항을 점검합니다.", icon: "checklist", color: "warm", category: "체크리스트", path: "#" },
        { title: "수의계약 판단기", desc: "수의계약 가능 여부를 자동으로 판단합니다.", icon: "gavel", color: "point", category: "AI 도구", path: "#" },
        { title: "법정기간 계산기", desc: "행정처분, 소송 등의 법정기간을 계산합니다.", icon: "calendar_month", color: "navy", category: "계산기", path: "#" },
        { title: "견적서 검토 도구", desc: "견적서의 적정성을 자동으로 검토합니다.", icon: "fact_check", color: "point", category: "AI 도구", path: "/forms/견적서검토.html", badge: "인기" },
      ].each do |tool| %>
        <%= link_to tool[:path], class: "group card card-interactive p-6 relative overflow-hidden item-card", data: { category: tool[:category], title: tool[:title] } do %>
          <% if tool[:badge] %>
            <span class="absolute top-4 right-4 badge <%= tool[:badge] == 'NEW' ? 'badge-warm' : 'badge-point' %>"><%= tool[:badge] %></span>
          <% end %>

          <div class="icon-container icon-container-lg bg-<%= tool[:color] %>-100 group-hover:bg-<%= tool[:color] %>-600 transition-colors mb-4">
            <span class="material-symbols-outlined text-3xl text-<%= tool[:color] %>-600 group-hover:text-white transition-colors"><%= tool[:icon] %></span>
          </div>

          <span class="text-xs font-semibold text-navy-400 mb-2 block"><%= tool[:category] %></span>
          <h3 class="text-lg font-bold text-navy-900 mb-2 group-hover:text-<%= tool[:color] %>-600 transition-colors"><%= tool[:title] %></h3>
          <p class="text-navy-600 text-sm leading-relaxed"><%= tool[:desc] %></p>

          <div class="mt-4 flex items-center text-<%= tool[:color] %>-600 text-sm font-semibold">
            바로가기
            <span class="material-symbols-outlined text-lg ml-1 group-hover:translate-x-1 transition-transform">arrow_forward</span>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="py-16 bg-surface-100">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <div class="icon-container icon-container-lg bg-point-100 mx-auto mb-6">
      <span class="material-symbols-outlined text-3xl text-point-600">lightbulb</span>
    </div>
    <h2 class="text-2xl font-bold text-navy-900 mb-4">필요한 도구가 없으신가요?</h2>
    <p class="text-navy-600 mb-8">원하시는 도구를 요청해주시면 검토 후 개발을 진행합니다.</p>
    <button class="btn btn-point btn-md">
      <span class="material-symbols-outlined">add</span>
      도구 요청하기
    </button>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const tabs = document.querySelectorAll('#category-tabs .tab-btn');
  const items = document.querySelectorAll('.item-card');
  const itemCount = document.getElementById('item-count');

  function filterItems() {
    const activeTab = document.querySelector('#category-tabs .tab-btn.active');
    const category = activeTab ? activeTab.dataset.category : '전체';
    let visibleCount = 0;

    items.forEach(item => {
      const itemCategory = item.dataset.category;
      const matchesCategory = category === '전체' || itemCategory === category;

      if (matchesCategory) {
        item.style.display = '';
        visibleCount++;
      } else {
        item.style.display = 'none';
      }
    });

    itemCount.textContent = visibleCount;
  }

  tabs.forEach(tab => {
    tab.addEventListener('click', function() {
      // 모든 탭 비활성화
      tabs.forEach(t => {
        t.classList.remove('active', 'bg-point-600', 'text-white', 'shadow-md');
        t.classList.add('bg-surface-100', 'text-navy-600');
      });

      // 클릭된 탭 활성화
      this.classList.add('active', 'bg-point-600', 'text-white', 'shadow-md');
      this.classList.remove('bg-surface-100', 'text-navy-600');

      filterItems();
    });
  });
});
</script>
