# Legal Verification Team (법령검증팀)

이 스킬은 실무.kr의 법령 콘텐츠(토픽 37개) + 실무 도구(19개)를 정부 공식 출처 기반으로 전수 검증하는 팀을 생성하고 운영합니다.

## 검증 범위

- **토픽**: 37개 법령 가이드 (law_content, decree_content, rule_content)
- **도구**: 19개 실무 자동화 도구 (계산기, 문서 생성기 등)

## 실행 순서

### 1단계: 팀 생성 및 태스크 생성

1. **팀 생성**
   ```
   TeamCreate:
   - team_name: "legal-verification"
   - description: "실무.kr 법령 콘텐츠 및 도구 전수 검증 팀"
   - agent_type: "coordinator"
   ```

2. **토픽 검증 태스크 생성** (4개)
   ```
   TaskCreate:
   1. "토픽 #1-10 법령 검증" (verifier-A)
   2. "토픽 #11-20 법령 검증" (verifier-B)
   3. "토픽 #21-30 법령 검증" (verifier-C)
   4. "토픽 #31-37 법령 검증" (verifier-D)
   ```

3. **도구 검증 태스크 생성** (4개)
   ```
   TaskCreate:
   5. "도구 #1-5 법령 검증" (verifier-A)
   6. "도구 #6-10 법령 검증" (verifier-B)
   7. "도구 #11-15 법령 검증" (verifier-C)
   8. "도구 #16-19 법령 검증" (verifier-D)
   ```

### 2단계: 검증자 스폰 및 검증 지시

1. **검증자 4명 스폰**
   ```
   Task tool (subagent_type: "general-purpose"):
   - name: "verifier-A"
   - name: "verifier-B"
   - name: "verifier-C"
   - name: "verifier-D"
   ```

2. **각 검증자에게 검증 지시** (SendMessage)
   - 토픽 범위 지정
   - 도구 범위 지정
   - 검증 체크리스트 전달 (아래 참조)
   - 오류 발견 시 즉시 보고 지시

### 3단계: 토픽 검증 (37개)

각 검증자는 다음 체크리스트를 기반으로 검증:

#### 토픽 검증 체크리스트

**A. 법령 출처 검증 (CRITICAL)**
- [ ] 조문은 정부 공식 출처에서 확인했는가?
  - ✅ 법제처 국가법령정보센터 (law.go.kr)
  - ✅ 행정안전부 예규 (mois.go.kr)
  - ✅ 조달청 공식 자료 (pps.go.kr)
  - ❌ 블로그, 커뮤니티 (신뢰 불가)

**B. 법령 체계 검증 (CRITICAL)**
- [ ] law_content에 시행령/시행규칙 조문이 없는가?
  - law_content = 법률만 (예: 지방계약법 제9조)
  - decree_content = 시행령 (예: 지방계약법 시행령 제25조)
  - rule_content = 시행규칙/지침 (예: 입찰 및 계약집행기준)

**C. 조문 번호 검증 (CRITICAL)**
- [ ] 조문 번호가 정확한가?
  - 수의계약 한도: 시행령 제25조 (❌ 제30조 아님)
  - 견적 절차: 시행령 제30조 (❌ 제25조 아님)
  - 분할계약 금지: 시행령 제77조
  - 입찰보증금: 시행령 제12조 (❌ 제9조 아님)
  - 지체상금/지연배상금: 시행령 제90조 (❌ 제74조 아님)

**D. 조항명 검증**
- [ ] 조항명이 원문과 일치하는가?
  - 제30조 (수의계약대상자의 선정절차 등) ✅
  - 제30조 (수의계약의 방법) ❌

**E. 금액 기준 검증 (CRITICAL)**

1. **수의계약 한도** (시행령 제25조)
   - [ ] 공사 - 종합공사: 4억원 이하 ✅
   - [ ] 공사 - 전문공사: 2억원 이하 ✅
   - [ ] 공사 - 기타공사: 1.6억원 이하 ✅
   - [ ] 물품/용역 - 일반: 2천만원 이하 ✅
   - [ ] 물품/용역 - 청년창업: 5천만원 이하 ✅
   - [ ] 물품/용역 - 특례(소기업·여성·장애인·사회적기업): 5천만원~1억원 이하 ✅

2. **1인/2인 견적 기준** (시행령 제30조)
   - [ ] 1인 견적: 2천만원 이하 (일반), 5천만원 이하 (특례) ✅
   - [ ] 2인 이상 견적: 2천만원 초과 ✅
   - [ ] G2B 전자견적 의무: 2천만원 초과 ✅

3. **입찰 관련 기준**
   - [ ] 입찰공고 기간: 10억 미만(7일), 10억~50억(15일), 50억 이상(40일) ✅
   - [ ] 복수예비가격: 2억원 이상 ✅
   - [ ] 적격심사: 물품·용역 2억원 이상 ✅
   - [ ] 규격가격 분리입찰: 2억원 이상 물품 ✅

**F. 다른 토픽과 일관성 확인**
- [ ] 같은 조문을 인용하는 다른 토픽과 내용이 일치하는가?
- [ ] 같은 금액 기준이 다른 토픽과 일치하는가?

**G. 법령 정식 명칭 확인**
- [ ] 시방서 (❌ 시공지시서 아님) - 지방계약법 시행령 제15조
- [ ] 물량내역서 (❌ 내역서 아님)
- [ ] 과업내용서 (❌ 과업지시서 아님)

**H. 오류 발견 시 보고 형식**
```
[중대 오류] 토픽 #12 "지체상금"
- 문제: decree_content에 "제74조 (지체상금)" 인용
- 정확한 조문: 제90조 (지연배상금)
- 근거: 법제처 law.go.kr 지방계약법 시행령 확인
- 수정 필요: decree_content 전면 재작성
```

### 4단계: 도구 검증 (19개)

각 검증자는 다음 체크리스트를 기반으로 검증:

#### 도구 검증 체크리스트

**A. 도구별 검증 항목**

1. **여비계산기** (app/views/tools/travel_calculator.html.erb)
   - [ ] 숙박비 금액 기준: 서울 7만원, 광역시 6만원, 기타 5만원 (2026.01.02 시행)
   - [ ] 식비 기준: 일비에 포함 (공무원여비규정 확인)
   - [ ] 운임 기준: KTX/고속버스/항공 요금 실비

2. **추정가격 계산기** (app/services/estimated_price_service.rb)
   - [ ] 수의계약 한도: 물품/용역 2천만원, 공사 2억원 (전문공사 기준)
   - [ ] 견적 요건 로직:
     - 2백만원 이하: 견적서 생략 가능
     - 2천만원 이하: 1인 견적
     - 2천만원 초과: 2인 이상 견적 (특례: 5천만원 이하 1인 가능)
   - [ ] 이윤율 상한: 용역 10%, 공사 15%
   - [ ] 일반관리비 상한: 8%

3. **수의계약 사유서 생성기** (app/views/contract_reasons/index.html.erb)
   - [ ] 공사 금액 기준: 종합 4억, 전문 2억, 기타 1.6억
   - [ ] 물품/용역 금액 기준: 일반 2천만원, 특례 5천만원~1억원
   - [ ] 조문 인용: 지방계약법 시행령 제25조

4. **법정기간 계산기** (app/services/legal_period_service.rb)
   - [ ] 입찰공고 기간: 10억 미만 7일, 10억~50억 15일, 50억 이상 40일
   - [ ] 계약체결 기한: 낙찰일로부터 10일 이내
   - [ ] 대금지급 기한: 검사완료일로부터 5일 이내

5. **계약보증금 계산기** (app/services/contract_guarantee_service.rb)
   - [ ] 계약보증금: 계약금액의 10% (공사), 5% (물품/용역)
   - [ ] 하자보증금: 계약금액의 3~10% (공사)
   - [ ] 인지세: 5천만원 이상 계약 시

6. **소요예산 추정기** (app/services/budget_estimator_service.rb)
   - [ ] 원가 계산 로직이 EstimatedPriceService와 일치하는가?
   - [ ] 예비비 10% 자동 추가

7. **물량내역서+시방서 생성기** (app/views/tools/cost_estimate.html.erb)
   - [ ] 시방서 양식이 지방계약법 시행령 제15조에 부합하는가?

8. **설계변경 검토서** (app/views/tools/design_change.html.erb)
   - [ ] 설계변경 사유가 지방계약법 시행령 제74조에 부합하는가?

9. **기성검사 체크리스트** (app/views/tools/progress_inspection.html.erb)
   - [ ] 검사 항목이 지방계약법 시행령 제66조에 부합하는가?

10. **원가계산서 검토** (app/views/tools/cost_calculation.html.erb)
    - [ ] 이윤율/일반관리비 상한이 EstimatedPriceService와 일치하는가?

**B. 오류 발견 시 보고 형식**
```
[중대 오류] 여비계산기 (travel_calculator.html.erb:364)
- 문제: 숙박비 금액이 구법 기준 (서울 10만원, 광역시 8만원)
- 정확한 기준: 서울 7만원, 광역시 6만원, 기타 5만원 (2026.01.02 시행)
- 근거: 공무원여비규정 별표 1 (mois.go.kr 확인)
- 수정 필요: accommodationByRegion 객체 금액 수정
```

### 5단계: 결과 수집 및 보고

1. **검증 완료 대기**
   - 모든 검증자가 검증을 완료할 때까지 대기
   - 검증자로부터 메시지가 올 때마다 진행 상황 업데이트

2. **오류 집계**
   ```
   오류 분류:
   - 중대 오류: 조문 번호 오류, 금액 기준 오류, 법령 체계 혼재
   - 경미 오류: 조항명 부정확, law_content 보완 필요
   ```

3. **결과 보고 형식**
   ```
   ✅ 법령검증팀 검증 완료

   📊 검증 결과:
   - 토픽: 37개 검증 완료
   - 도구: 19개 검증 완료

   🔍 오류 발견:
   - 중대 오류: X건
   - 경미 오류: Y건

   ⚠️ 중대 오류 목록:
   1. 토픽 #12 "지체상금" - 조문 번호 오류 (제74조 → 제90조)
   2. 여비계산기 - 숙박비 금액 오류 (구법 기준 사용)
   ...

   📝 경미 오류 목록:
   1. 토픽 #18 - law_content 보완 필요
   ...

   💡 권장 조치:
   - 중대 오류는 즉시 수정 필요
   - 경미 오류는 검토 후 수정
   ```

### 6단계: 오류 수정 (사용자 요청 시)

1. **사용자에게 수정 여부 확인**
   ```
   "오류를 자동으로 수정할까요?"
   1. 예 - 모든 오류 수정
   2. 중대 오류만 수정
   3. 아니오 - 보고만 받음
   ```

2. **오류 수정**
   - 토픽 오류: DB 직접 업데이트 (프로덕션 Rails console)
   - 도구 오류: 파일 직접 수정 (Edit tool)

3. **수정 확인**
   - 수정된 내용을 다시 검증
   - 수정 완료 보고

### 7단계: 팀 정리

1. **팀원 종료**
   ```
   SendMessage (type: "shutdown_request"):
   - recipient: "verifier-A"
   - recipient: "verifier-B"
   - recipient: "verifier-C"
   - recipient: "verifier-D"
   ```

2. **팀 삭제**
   ```
   TeamDelete
   ```

---

## 검증 실행 예시

```
/legal-verification
```

→ 팀 생성 → 검증자 스폰 → 검증 진행 → 결과 보고 → 팀 정리

---

## 주의사항

### CRITICAL (반드시 준수)

1. **정부 공식 출처만 사용**
   - ✅ law.go.kr, mois.go.kr, pps.go.kr
   - ❌ 블로그, 커뮤니티, 상업 사이트

2. **법령 체계 엄격 구분**
   - law_content = 법률만
   - decree_content = 시행령만
   - rule_content = 시행규칙/지침만

3. **조문 번호 교차 검증**
   - 제25조 (수의계약 한도)
   - 제30조 (견적 절차)
   - 제77조 (분할계약 금지)
   - 제90조 (지연배상금)

4. **금액 기준 표준화**
   - MEMORY.md의 "표준 금액 기준" 섹션 참조
   - 다른 토픽/도구와 일관성 유지

### High (빈번히 발생하는 오류)

1. **법령 체계 혼재**
   - ❌ law_content에 "시행령 제25조" 작성
   - ✅ law_content에는 법률만, decree_content에 시행령

2. **조문 번호 혼동**
   - ❌ "분할계약은 시행령 제25조에서 금지"
   - ✅ "분할계약은 시행령 제77조에서 금지"

3. **금액 기준 혼동**
   - ❌ "일반 물품 5천만원 이하 1인 견적"
   - ✅ "일반 물품 2천만원 이하 1인 견적" (5천만원은 특례만)

---

## 과거 검증 결과 (참고)

**2026-02-22 검증 결과**:
- 토픽 37개: 중대 오류 4건, 경미 오류 5건
  - 중대: #12 (지체상금 조문), #25 (공사 종류 미구분), #31 (적격심사 조문), #32 (입찰보증금 조문)
  - 경미: #18, #19, #27, #28, #29 (law_content 보완)
- 도구 19개: 중대 오류 4건
  - 여비계산기 (숙박비)
  - 추정가격 계산기 (수의계약 한도, 견적 로직)
  - 수의계약 사유서 (공사 금액 기준)

**오류율**: 13건 / 56개 항목 = 23.2%
**수정 완료**: 100% (법령 정확성 100% 달성)

---

## 빠른 실행 (자동화)

전체 프로세스를 자동으로 실행하려면:

```
/legal-verification
```

수동으로 단계별 실행하려면:

```
1. TeamCreate (team_name: "legal-verification")
2. TaskCreate (8개 태스크)
3. Task tool (4명 스폰)
4. SendMessage (검증 지시)
5. 검증 완료 대기
6. 결과 수집 및 보고
7. TeamDelete
```

---

## 검증 완료 후 배포

검증 완료 후 오류를 수정했다면 반드시 배포:

```
/deploy
```

배포 후 검증:
- HTTP 200 확인
- 주요 페이지 렌더링 확인
- 로그에서 에러 확인

---

## 문의

검증 과정에서 문제가 발생하면:
- CLAUDE.md 참조
- MEMORY.md 참조
- 팀 에이전트 로그 확인: `~/.claude/teams/legal-verification/`
